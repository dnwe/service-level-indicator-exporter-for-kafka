<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# trace

```go
import "go.opentelemetry.io/otel/sdk/trace"
```

Package trace contains support for OpenTelemetry distributed tracing.

The following assumes a basic familiarity with OpenTelemetry concepts. See https://opentelemetry.io.

## Index

- [Constants](<#constants>)
- [type BatchSpanProcessorOption](<#type-batchspanprocessoroption>)
  - [func WithBatchTimeout(delay time.Duration) BatchSpanProcessorOption](<#func-withbatchtimeout>)
  - [func WithBlocking() BatchSpanProcessorOption](<#func-withblocking>)
  - [func WithExportTimeout(timeout time.Duration) BatchSpanProcessorOption](<#func-withexporttimeout>)
  - [func WithMaxExportBatchSize(size int) BatchSpanProcessorOption](<#func-withmaxexportbatchsize>)
  - [func WithMaxQueueSize(size int) BatchSpanProcessorOption](<#func-withmaxqueuesize>)
- [type BatchSpanProcessorOptions](<#type-batchspanprocessoroptions>)
- [type Event](<#type-event>)
- [type IDGenerator](<#type-idgenerator>)
- [type Link](<#type-link>)
- [type ParentBasedSamplerOption](<#type-parentbasedsampleroption>)
  - [func WithLocalParentNotSampled(s Sampler) ParentBasedSamplerOption](<#func-withlocalparentnotsampled>)
  - [func WithLocalParentSampled(s Sampler) ParentBasedSamplerOption](<#func-withlocalparentsampled>)
  - [func WithRemoteParentNotSampled(s Sampler) ParentBasedSamplerOption](<#func-withremoteparentnotsampled>)
  - [func WithRemoteParentSampled(s Sampler) ParentBasedSamplerOption](<#func-withremoteparentsampled>)
- [type ReadOnlySpan](<#type-readonlyspan>)
- [type ReadWriteSpan](<#type-readwritespan>)
- [type Sampler](<#type-sampler>)
  - [func AlwaysSample() Sampler](<#func-alwayssample>)
  - [func NeverSample() Sampler](<#func-neversample>)
  - [func ParentBased(root Sampler, samplers ...ParentBasedSamplerOption) Sampler](<#func-parentbased>)
  - [func TraceIDRatioBased(fraction float64) Sampler](<#func-traceidratiobased>)
- [type SamplingDecision](<#type-samplingdecision>)
- [type SamplingParameters](<#type-samplingparameters>)
- [type SamplingResult](<#type-samplingresult>)
- [type SpanExporter](<#type-spanexporter>)
- [type SpanLimits](<#type-spanlimits>)
- [type SpanProcessor](<#type-spanprocessor>)
  - [func NewBatchSpanProcessor(exporter SpanExporter, options ...BatchSpanProcessorOption) SpanProcessor](<#func-newbatchspanprocessor>)
  - [func NewSimpleSpanProcessor(exporter SpanExporter) SpanProcessor](<#func-newsimplespanprocessor>)
- [type Status](<#type-status>)
- [type TracerProvider](<#type-tracerprovider>)
  - [func NewTracerProvider(opts ...TracerProviderOption) *TracerProvider](<#func-newtracerprovider>)
  - [func (p *TracerProvider) ForceFlush(ctx context.Context) error](<#func-tracerprovider-forceflush>)
  - [func (p *TracerProvider) RegisterSpanProcessor(s SpanProcessor)](<#func-tracerprovider-registerspanprocessor>)
  - [func (p *TracerProvider) Shutdown(ctx context.Context) error](<#func-tracerprovider-shutdown>)
  - [func (p *TracerProvider) Tracer(name string, opts ...trace.TracerOption) trace.Tracer](<#func-tracerprovider-tracer>)
  - [func (p *TracerProvider) UnregisterSpanProcessor(s SpanProcessor)](<#func-tracerprovider-unregisterspanprocessor>)
- [type TracerProviderOption](<#type-tracerprovideroption>)
  - [func WithBatcher(e SpanExporter, opts ...BatchSpanProcessorOption) TracerProviderOption](<#func-withbatcher>)
  - [func WithIDGenerator(g IDGenerator) TracerProviderOption](<#func-withidgenerator>)
  - [func WithResource(r *resource.Resource) TracerProviderOption](<#func-withresource>)
  - [func WithSampler(s Sampler) TracerProviderOption](<#func-withsampler>)
  - [func WithSpanLimits(sl SpanLimits) TracerProviderOption](<#func-withspanlimits>)
  - [func WithSpanProcessor(sp SpanProcessor) TracerProviderOption](<#func-withspanprocessor>)
  - [func WithSyncer(e SpanExporter) TracerProviderOption](<#func-withsyncer>)


## Constants

Defaults for BatchSpanProcessorOptions.

```go
const (
    DefaultMaxQueueSize       = 2048
    DefaultScheduleDelay      = 5000
    DefaultExportTimeout      = 30000
    DefaultMaxExportBatchSize = 512
)
```

```go
const (
    // DefaultAttributeCountLimit is the default maximum allowed span attribute count.
    DefaultAttributeCountLimit = 128

    // DefaultEventCountLimit is the default maximum allowed span event count.
    DefaultEventCountLimit = 128

    // DefaultLinkCountLimit is the default maximum allowed span link count.
    DefaultLinkCountLimit = 128

    // DefaultAttributePerEventCountLimit is the default maximum allowed attribute per span event count.
    DefaultAttributePerEventCountLimit = 128

    // DefaultAttributePerLinkCountLimit is the default maximum allowed attribute per span link count.
    DefaultAttributePerLinkCountLimit = 128
)
```

## type BatchSpanProcessorOption

```go
type BatchSpanProcessorOption func(o *BatchSpanProcessorOptions)
```

### func WithBatchTimeout

```go
func WithBatchTimeout(delay time.Duration) BatchSpanProcessorOption
```

### func WithBlocking

```go
func WithBlocking() BatchSpanProcessorOption
```

### func WithExportTimeout

```go
func WithExportTimeout(timeout time.Duration) BatchSpanProcessorOption
```

### func WithMaxExportBatchSize

```go
func WithMaxExportBatchSize(size int) BatchSpanProcessorOption
```

### func WithMaxQueueSize

```go
func WithMaxQueueSize(size int) BatchSpanProcessorOption
```

## type BatchSpanProcessorOptions

```go
type BatchSpanProcessorOptions struct {
    // MaxQueueSize is the maximum queue size to buffer spans for delayed processing. If the
    // queue gets full it drops the spans. Use BlockOnQueueFull to change this behavior.
    // The default value of MaxQueueSize is 2048.
    MaxQueueSize int

    // BatchTimeout is the maximum duration for constructing a batch. Processor
    // forcefully sends available spans when timeout is reached.
    // The default value of BatchTimeout is 5000 msec.
    BatchTimeout time.Duration

    // ExportTimeout specifies the maximum duration for exporting spans. If the timeout
    // is reached, the export will be cancelled.
    // The default value of ExportTimeout is 30000 msec.
    ExportTimeout time.Duration

    // MaxExportBatchSize is the maximum number of spans to process in a single batch.
    // If there are more than one batch worth of spans then it processes multiple batches
    // of spans one batch after the other without any delay.
    // The default value of MaxExportBatchSize is 512.
    MaxExportBatchSize int

    // BlockOnQueueFull blocks onEnd() and onStart() method if the queue is full
    // AND if BlockOnQueueFull is set to true.
    // Blocking option should be used carefully as it can severely affect the performance of an
    // application.
    BlockOnQueueFull bool
}
```

## type Event

Event is a thing that happened during a Span's lifetime.

```go
type Event struct {
    // Name is the name of this event
    Name string

    // Attributes describe the aspects of the event.
    Attributes []attribute.KeyValue

    // DroppedAttributeCount is the number of attributes that were not
    // recorded due to configured limits being reached.
    DroppedAttributeCount int

    // Time at which this event was recorded.
    Time time.Time
}
```

## type IDGenerator

IDGenerator allows custom generators for TraceID and SpanID.

```go
type IDGenerator interface {

    // NewIDs returns a new trace and span ID.
    NewIDs(ctx context.Context) (trace.TraceID, trace.SpanID)

    // NewSpanID returns a ID for a new span in the trace with traceID.
    NewSpanID(ctx context.Context, traceID trace.TraceID) trace.SpanID
}
```

## type Link

Link is the relationship between two Spans. The relationship can be within the same Trace or across different Traces.

```go
type Link struct {
    // SpanContext of the linked Span.
    SpanContext trace.SpanContext

    // Attributes describe the aspects of the link.
    Attributes []attribute.KeyValue

    // DroppedAttributeCount is the number of attributes that were not
    // recorded due to configured limits being reached.
    DroppedAttributeCount int
}
```

## type ParentBasedSamplerOption

ParentBasedSamplerOption configures the sampler for a particular sampling case.

```go
type ParentBasedSamplerOption interface {
    // contains filtered or unexported methods
}
```

### func WithLocalParentNotSampled

```go
func WithLocalParentNotSampled(s Sampler) ParentBasedSamplerOption
```

WithLocalParentNotSampled sets the sampler for the case of local parent which is not sampled.

### func WithLocalParentSampled

```go
func WithLocalParentSampled(s Sampler) ParentBasedSamplerOption
```

WithLocalParentSampled sets the sampler for the case of sampled local parent.

### func WithRemoteParentNotSampled

```go
func WithRemoteParentNotSampled(s Sampler) ParentBasedSamplerOption
```

WithRemoteParentNotSampled sets the sampler for the case of remote parent which is not sampled.

### func WithRemoteParentSampled

```go
func WithRemoteParentSampled(s Sampler) ParentBasedSamplerOption
```

WithRemoteParentSampled sets the sampler for the case of sampled remote parent.

## type ReadOnlySpan

ReadOnlySpan allows reading information from the data structure underlying a trace.Span. It is used in places where reading information from a span is necessary but changing the span isn't necessary or allowed.

Warning: methods may be added to this interface in minor releases.

```go
type ReadOnlySpan interface {
    // Name returns the name of the span.
    Name() string
    // SpanContext returns the unique SpanContext that identifies the span.
    SpanContext() trace.SpanContext
    // Parent returns the unique SpanContext that identifies the parent of the
    // span if one exists. If the span has no parent the returned SpanContext
    // will be invalid.
    Parent() trace.SpanContext
    // SpanKind returns the role the span plays in a Trace.
    SpanKind() trace.SpanKind
    // StartTime returns the time the span started recording.
    StartTime() time.Time
    // EndTime returns the time the span stopped recording. It will be zero if
    // the span has not ended.
    EndTime() time.Time
    // Attributes returns the defining attributes of the span.
    // The order of the returned attributes is not guaranteed to be stable across invocations.
    Attributes() []attribute.KeyValue
    // Links returns all the links the span has to other spans.
    Links() []Link
    // Events returns all the events that occurred within in the spans
    // lifetime.
    Events() []Event
    // Status returns the spans status.
    Status() Status
    // InstrumentationLibrary returns information about the instrumentation
    // library that created the span.
    InstrumentationLibrary() instrumentation.Library
    // Resource returns information about the entity that produced the span.
    Resource() *resource.Resource
    // DroppedAttributes returns the number of attributes dropped by the span
    // due to limits being reached.
    DroppedAttributes() int
    // DroppedLinks returns the number of links dropped by the span due to
    // limits being reached.
    DroppedLinks() int
    // DroppedEvents returns the number of events dropped by the span due to
    // limits being reached.
    DroppedEvents() int
    // ChildSpanCount returns the count of spans that consider the span a
    // direct parent.
    ChildSpanCount() int
    // contains filtered or unexported methods
}
```

## type ReadWriteSpan

ReadWriteSpan exposes the same methods as trace.Span and in addition allows reading information from the underlying data structure. This interface exposes the union of the methods of trace.Span \(which is a "write\-only" span\) and ReadOnlySpan. New methods for writing or reading span information should be added under trace.Span or ReadOnlySpan, respectively.

Warning: methods may be added to this interface in minor releases.

```go
type ReadWriteSpan interface {
    trace.Span
    ReadOnlySpan
}
```

## type Sampler

Sampler decides whether a trace should be sampled and exported.

```go
type Sampler interface {

    // ShouldSample returns a SamplingResult based on a decision made from the
    // passed parameters.
    ShouldSample(parameters SamplingParameters) SamplingResult

    // Description returns information describing the Sampler.
    Description() string
}
```

### func AlwaysSample

```go
func AlwaysSample() Sampler
```

AlwaysSample returns a Sampler that samples every trace. Be careful about using this sampler in a production application with significant traffic: a new trace will be started and exported for every request.

### func NeverSample

```go
func NeverSample() Sampler
```

NeverSample returns a Sampler that samples no traces.

### func ParentBased

```go
func ParentBased(root Sampler, samplers ...ParentBasedSamplerOption) Sampler
```

ParentBased returns a composite sampler which behaves differently, based on the parent of the span. If the span has no parent, the root\(Sampler\) is used to make sampling decision. If the span has a parent, depending on whether the parent is remote and whether it is sampled, one of the following samplers will apply: \- remoteParentSampled\(Sampler\) \(default: AlwaysOn\) \- remoteParentNotSampled\(Sampler\) \(default: AlwaysOff\) \- localParentSampled\(Sampler\) \(default: AlwaysOn\) \- localParentNotSampled\(Sampler\) \(default: AlwaysOff\)

### func TraceIDRatioBased

```go
func TraceIDRatioBased(fraction float64) Sampler
```

TraceIDRatioBased samples a given fraction of traces. Fractions \>= 1 will always sample. Fractions \< 0 are treated as zero. To respect the parent trace's \`SampledFlag\`, the \`TraceIDRatioBased\` sampler should be used as a delegate of a \`Parent\` sampler.

## type SamplingDecision

SamplingDecision indicates whether a span is dropped, recorded and/or sampled.

```go
type SamplingDecision uint8
```

Valid sampling decisions

```go
const (
    // Drop will not record the span and all attributes/events will be dropped
    Drop SamplingDecision = iota

    // Record indicates the span's `IsRecording() == true`, but `Sampled` flag
    // *must not* be set
    RecordOnly

    // RecordAndSample has span's `IsRecording() == true` and `Sampled` flag
    // *must* be set
    RecordAndSample
)
```

## type SamplingParameters

SamplingParameters contains the values passed to a Sampler.

```go
type SamplingParameters struct {
    ParentContext context.Context
    TraceID       trace.TraceID
    Name          string
    Kind          trace.SpanKind
    Attributes    []attribute.KeyValue
    Links         []trace.Link
}
```

## type SamplingResult

SamplingResult conveys a SamplingDecision, set of Attributes and a Tracestate.

```go
type SamplingResult struct {
    Decision   SamplingDecision
    Attributes []attribute.KeyValue
    Tracestate trace.TraceState
}
```

## type SpanExporter

SpanExporter handles the delivery of spans to external receivers. This is the final component in the trace export pipeline.

```go
type SpanExporter interface {

    // ExportSpans exports a batch of spans.
    //
    // This function is called synchronously, so there is no concurrency
    // safety requirement. However, due to the synchronous calling pattern,
    // it is critical that all timeouts and cancellations contained in the
    // passed context must be honored.
    //
    // Any retry logic must be contained in this function. The SDK that
    // calls this function will not implement any retry logic. All errors
    // returned by this function are considered unrecoverable and will be
    // reported to a configured error Handler.
    ExportSpans(ctx context.Context, spans []ReadOnlySpan) error

    // Shutdown notifies the exporter of a pending halt to operations. The
    // exporter is expected to preform any cleanup or synchronization it
    // requires while honoring all timeouts and cancellations contained in
    // the passed context.
    Shutdown(ctx context.Context) error
}
```

## type SpanLimits

SpanLimits represents the limits of a span.

```go
type SpanLimits struct {
    // AttributeCountLimit is the maximum allowed span attribute count.
    AttributeCountLimit int

    // EventCountLimit is the maximum allowed span event count.
    EventCountLimit int

    // LinkCountLimit is the maximum allowed span link count.
    LinkCountLimit int

    // AttributePerEventCountLimit is the maximum allowed attribute per span event count.
    AttributePerEventCountLimit int

    // AttributePerLinkCountLimit is the maximum allowed attribute per span link count.
    AttributePerLinkCountLimit int
}
```

## type SpanProcessor

SpanProcessor is a processing pipeline for spans in the trace signal. SpanProcessors registered with a TracerProvider and are called at the start and end of a Span's lifecycle, and are called in the order they are registered.

```go
type SpanProcessor interface {

    // OnStart is called when a span is started. It is called synchronously
    // and should not block.
    OnStart(parent context.Context, s ReadWriteSpan)

    // OnEnd is called when span is finished. It is called synchronously and
    // hence not block.
    OnEnd(s ReadOnlySpan)

    // Shutdown is called when the SDK shuts down. Any cleanup or release of
    // resources held by the processor should be done in this call.
    //
    // Calls to OnStart, OnEnd, or ForceFlush after this has been called
    // should be ignored.
    //
    // All timeouts and cancellations contained in ctx must be honored, this
    // should not block indefinitely.
    Shutdown(ctx context.Context) error

    // ForceFlush exports all ended spans to the configured Exporter that have not yet
    // been exported.  It should only be called when absolutely necessary, such as when
    // using a FaaS provider that may suspend the process after an invocation, but before
    // the Processor can export the completed spans.
    ForceFlush(ctx context.Context) error
}
```

### func NewBatchSpanProcessor

```go
func NewBatchSpanProcessor(exporter SpanExporter, options ...BatchSpanProcessorOption) SpanProcessor
```

NewBatchSpanProcessor creates a new SpanProcessor that will send completed span batches to the exporter with the supplied options.

If the exporter is nil, the span processor will preform no action.

### func NewSimpleSpanProcessor

```go
func NewSimpleSpanProcessor(exporter SpanExporter) SpanProcessor
```

NewSimpleSpanProcessor returns a new SpanProcessor that will synchronously send completed spans to the exporter immediately.

This SpanProcessor is not recommended for production use. The synchronous nature of this SpanProcessor make it good for testing, debugging, or showing examples of other feature, but it will be slow and have a high computation resource usage overhead. The BatchSpanProcessor is recommended for production use instead.

## type Status

Status is the classified state of a Span.

```go
type Status struct {
    // Code is an identifier of a Spans state classification.
    Code codes.Code
    // Description is a user hint about why that status was set. It is only
    // applicable when Code is Error.
    Description string
}
```

## type TracerProvider

```go
type TracerProvider struct {
    // contains filtered or unexported fields
}
```

### func NewTracerProvider

```go
func NewTracerProvider(opts ...TracerProviderOption) *TracerProvider
```

NewTracerProvider returns a new and configured TracerProvider.

By default the returned TracerProvider is configured with: \- a ParentBased\(AlwaysSample\) Sampler \- a random number IDGenerator \- the resource.Default\(\) Resource \- the default SpanLimits.

The passed opts are used to override these default values and configure the returned TracerProvider appropriately.

### func \(\*TracerProvider\) ForceFlush

```go
func (p *TracerProvider) ForceFlush(ctx context.Context) error
```

ForceFlush immediately exports all spans that have not yet been exported for all the registered span processors.

### func \(\*TracerProvider\) RegisterSpanProcessor

```go
func (p *TracerProvider) RegisterSpanProcessor(s SpanProcessor)
```

RegisterSpanProcessor adds the given SpanProcessor to the list of SpanProcessors

### func \(\*TracerProvider\) Shutdown

```go
func (p *TracerProvider) Shutdown(ctx context.Context) error
```

Shutdown shuts down the span processors in the order they were registered.

### func \(\*TracerProvider\) Tracer

```go
func (p *TracerProvider) Tracer(name string, opts ...trace.TracerOption) trace.Tracer
```

Tracer returns a Tracer with the given name and options. If a Tracer for the given name and options does not exist it is created, otherwise the existing Tracer is returned.

If name is empty, DefaultTracerName is used instead.

This method is safe to be called concurrently.

### func \(\*TracerProvider\) UnregisterSpanProcessor

```go
func (p *TracerProvider) UnregisterSpanProcessor(s SpanProcessor)
```

UnregisterSpanProcessor removes the given SpanProcessor from the list of SpanProcessors

## type TracerProviderOption

```go
type TracerProviderOption interface {
    // contains filtered or unexported methods
}
```

### func WithBatcher

```go
func WithBatcher(e SpanExporter, opts ...BatchSpanProcessorOption) TracerProviderOption
```

WithBatcher registers the exporter with the TracerProvider using a BatchSpanProcessor configured with the passed opts.

### func WithIDGenerator

```go
func WithIDGenerator(g IDGenerator) TracerProviderOption
```

WithIDGenerator returns a TracerProviderOption that will configure the IDGenerator g as a TracerProvider's IDGenerator. The configured IDGenerator is used by the Tracers the TracerProvider creates to generate new Span and Trace IDs.

If this option is not used, the TracerProvider will use a random number IDGenerator by default.

### func WithResource

```go
func WithResource(r *resource.Resource) TracerProviderOption
```

WithResource returns a TracerProviderOption that will configure the Resource r as a TracerProvider's Resource. The configured Resource is referenced by all the Tracers the TracerProvider creates. It represents the entity producing telemetry.

If this option is not used, the TracerProvider will use the resource.Default\(\) Resource by default.

### func WithSampler

```go
func WithSampler(s Sampler) TracerProviderOption
```

WithSampler returns a TracerProviderOption that will configure the Sampler s as a TracerProvider's Sampler. The configured Sampler is used by the Tracers the TracerProvider creates to make their sampling decisions for the Spans they create.

If this option is not used, the TracerProvider will use a ParentBased\(AlwaysSample\) Sampler by default.

### func WithSpanLimits

```go
func WithSpanLimits(sl SpanLimits) TracerProviderOption
```

WithSpanLimits returns a TracerProviderOption that will configure the SpanLimits sl as a TracerProvider's SpanLimits. The configured SpanLimits are used used by the Tracers the TracerProvider and the Spans they create to limit tracing resources used.

If this option is not used, the TracerProvider will use the default SpanLimits.

### func WithSpanProcessor

```go
func WithSpanProcessor(sp SpanProcessor) TracerProviderOption
```

WithSpanProcessor registers the SpanProcessor with a TracerProvider.

### func WithSyncer

```go
func WithSyncer(e SpanExporter) TracerProviderOption
```

WithSyncer registers the exporter with the TracerProvider using a SimpleSpanProcessor.

This is not recommended for production use. The synchronous nature of the SimpleSpanProcessor that will wrap the exporter make it good for testing, debugging, or showing examples of other feature, but it will be slow and have a high computation resource usage overhead. The WithBatcher option is recommended for production use instead.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

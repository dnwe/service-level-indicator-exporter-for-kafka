<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# watch

```go
import "k8s.io/apimachinery/pkg/watch"
```

Package watch contains a generic watchable interface, and a fake for testing code that uses the watch interface.

## Index

- [Variables](<#variables>)
- [type Broadcaster](<#type-broadcaster>)
  - [func NewBroadcaster(queueLength int, fullChannelBehavior FullChannelBehavior) *Broadcaster](<#func-newbroadcaster>)
  - [func NewLongQueueBroadcaster(queueLength int, fullChannelBehavior FullChannelBehavior) *Broadcaster](<#func-newlongqueuebroadcaster>)
  - [func (m *Broadcaster) Action(action EventType, obj runtime.Object)](<#func-broadcaster-action>)
  - [func (m *Broadcaster) ActionOrDrop(action EventType, obj runtime.Object) bool](<#func-broadcaster-actionordrop>)
  - [func (m *Broadcaster) Shutdown()](<#func-broadcaster-shutdown>)
  - [func (m *Broadcaster) Watch() Interface](<#func-broadcaster-watch>)
  - [func (m *Broadcaster) WatchWithPrefix(queuedEvents []Event) Interface](<#func-broadcaster-watchwithprefix>)
- [type Decoder](<#type-decoder>)
- [type Event](<#type-event>)
  - [func (in *Event) DeepCopy() *Event](<#func-event-deepcopy>)
  - [func (in *Event) DeepCopyInto(out *Event)](<#func-event-deepcopyinto>)
- [type EventType](<#type-eventtype>)
- [type FakeWatcher](<#type-fakewatcher>)
  - [func NewFake() *FakeWatcher](<#func-newfake>)
  - [func NewFakeWithChanSize(size int, blocking bool) *FakeWatcher](<#func-newfakewithchansize>)
  - [func (f *FakeWatcher) Action(action EventType, obj runtime.Object)](<#func-fakewatcher-action>)
  - [func (f *FakeWatcher) Add(obj runtime.Object)](<#func-fakewatcher-add>)
  - [func (f *FakeWatcher) Delete(lastValue runtime.Object)](<#func-fakewatcher-delete>)
  - [func (f *FakeWatcher) Error(errValue runtime.Object)](<#func-fakewatcher-error>)
  - [func (f *FakeWatcher) IsStopped() bool](<#func-fakewatcher-isstopped>)
  - [func (f *FakeWatcher) Modify(obj runtime.Object)](<#func-fakewatcher-modify>)
  - [func (f *FakeWatcher) Reset()](<#func-fakewatcher-reset>)
  - [func (f *FakeWatcher) ResultChan() <-chan Event](<#func-fakewatcher-resultchan>)
  - [func (f *FakeWatcher) Stop()](<#func-fakewatcher-stop>)
- [type FilterFunc](<#type-filterfunc>)
- [type FullChannelBehavior](<#type-fullchannelbehavior>)
- [type Interface](<#type-interface>)
  - [func Filter(w Interface, f FilterFunc) Interface](<#func-filter>)
  - [func NewEmptyWatch() Interface](<#func-newemptywatch>)
- [type ProxyWatcher](<#type-proxywatcher>)
  - [func NewProxyWatcher(ch chan Event) *ProxyWatcher](<#func-newproxywatcher>)
  - [func (pw *ProxyWatcher) ResultChan() <-chan Event](<#func-proxywatcher-resultchan>)
  - [func (pw *ProxyWatcher) Stop()](<#func-proxywatcher-stop>)
  - [func (pw *ProxyWatcher) StopChan() <-chan struct{}](<#func-proxywatcher-stopchan>)
  - [func (pw *ProxyWatcher) Stopping() bool](<#func-proxywatcher-stopping>)
- [type RaceFreeFakeWatcher](<#type-racefreefakewatcher>)
  - [func NewRaceFreeFake() *RaceFreeFakeWatcher](<#func-newracefreefake>)
  - [func (f *RaceFreeFakeWatcher) Action(action EventType, obj runtime.Object)](<#func-racefreefakewatcher-action>)
  - [func (f *RaceFreeFakeWatcher) Add(obj runtime.Object)](<#func-racefreefakewatcher-add>)
  - [func (f *RaceFreeFakeWatcher) Delete(lastValue runtime.Object)](<#func-racefreefakewatcher-delete>)
  - [func (f *RaceFreeFakeWatcher) Error(errValue runtime.Object)](<#func-racefreefakewatcher-error>)
  - [func (f *RaceFreeFakeWatcher) IsStopped() bool](<#func-racefreefakewatcher-isstopped>)
  - [func (f *RaceFreeFakeWatcher) Modify(obj runtime.Object)](<#func-racefreefakewatcher-modify>)
  - [func (f *RaceFreeFakeWatcher) Reset()](<#func-racefreefakewatcher-reset>)
  - [func (f *RaceFreeFakeWatcher) ResultChan() <-chan Event](<#func-racefreefakewatcher-resultchan>)
  - [func (f *RaceFreeFakeWatcher) Stop()](<#func-racefreefakewatcher-stop>)
- [type Recorder](<#type-recorder>)
  - [func NewRecorder(w Interface) *Recorder](<#func-newrecorder>)
  - [func (r *Recorder) Events() []Event](<#func-recorder-events>)
- [type Reporter](<#type-reporter>)
- [type StreamWatcher](<#type-streamwatcher>)
  - [func NewStreamWatcher(d Decoder, r Reporter) *StreamWatcher](<#func-newstreamwatcher>)
  - [func (sw *StreamWatcher) ResultChan() <-chan Event](<#func-streamwatcher-resultchan>)
  - [func (sw *StreamWatcher) Stop()](<#func-streamwatcher-stop>)


## Variables

```go
var (
    DefaultChanSize int32 = 100
)
```

## type Broadcaster

Broadcaster distributes event notifications among any number of watchers. Every event is delivered to every watcher.

```go
type Broadcaster struct {
    // contains filtered or unexported fields
}
```

### func NewBroadcaster

```go
func NewBroadcaster(queueLength int, fullChannelBehavior FullChannelBehavior) *Broadcaster
```

NewBroadcaster creates a new Broadcaster. queueLength is the maximum number of events to queue per watcher. It is guaranteed that events will be distributed in the order in which they occur, but the order in which a single event is distributed among all of the watchers is unspecified.

### func NewLongQueueBroadcaster

```go
func NewLongQueueBroadcaster(queueLength int, fullChannelBehavior FullChannelBehavior) *Broadcaster
```

NewLongQueueBroadcaster functions nearly identically to NewBroadcaster, except that the incoming queue is the same size as the outgoing queues \(specified by queueLength\).

### func \(\*Broadcaster\) Action

```go
func (m *Broadcaster) Action(action EventType, obj runtime.Object)
```

Action distributes the given event among all watchers.

### func \(\*Broadcaster\) ActionOrDrop

```go
func (m *Broadcaster) ActionOrDrop(action EventType, obj runtime.Object) bool
```

Action distributes the given event among all watchers, or drops it on the floor if too many incoming actions are queued up.  Returns true if the action was sent, false if dropped.

### func \(\*Broadcaster\) Shutdown

```go
func (m *Broadcaster) Shutdown()
```

Shutdown disconnects all watchers \(but any queued events will still be distributed\). You must not call Action or Watch\* after calling Shutdown. This call blocks until all events have been distributed through the outbound channels. Note that since they can be buffered, this means that the watchers might not have received the data yet as it can remain sitting in the buffered channel. It will block until the broadcaster stop request is actually executed

### func \(\*Broadcaster\) Watch

```go
func (m *Broadcaster) Watch() Interface
```

Watch adds a new watcher to the list and returns an Interface for it. Note: new watchers will only receive new events. They won't get an entire history of previous events. It will block until the watcher is actually added to the broadcaster.

### func \(\*Broadcaster\) WatchWithPrefix

```go
func (m *Broadcaster) WatchWithPrefix(queuedEvents []Event) Interface
```

WatchWithPrefix adds a new watcher to the list and returns an Interface for it. It sends queuedEvents down the new watch before beginning to send ordinary events from Broadcaster. The returned watch will have a queue length that is at least large enough to accommodate all of the items in queuedEvents. It will block until the watcher is actually added to the broadcaster.

## type Decoder

Decoder allows StreamWatcher to watch any stream for which a Decoder can be written.

```go
type Decoder interface {
    // Decode should return the type of event, the decoded object, or an error.
    // An error will cause StreamWatcher to call Close(). Decode should block until
    // it has data or an error occurs.
    Decode() (action EventType, object runtime.Object, err error)

    // Close should close the underlying io.Reader, signalling to the source of
    // the stream that it is no longer being watched. Close() must cause any
    // outstanding call to Decode() to return with an error of some sort.
    Close()
}
```

## type Event

Event represents a single event to a watched resource. \+k8s:deepcopy\-gen=true

```go
type Event struct {
    Type EventType

    // Object is:
    //  * If Type is Added or Modified: the new state of the object.
    //  * If Type is Deleted: the state of the object immediately before deletion.
    //  * If Type is Bookmark: the object (instance of a type being watched) where
    //    only ResourceVersion field is set. On successful restart of watch from a
    //    bookmark resourceVersion, client is guaranteed to not get repeat event
    //    nor miss any events.
    //  * If Type is Error: *api.Status is recommended; other types may make sense
    //    depending on context.
    Object runtime.Object
}
```

### func \(\*Event\) DeepCopy

```go
func (in *Event) DeepCopy() *Event
```

DeepCopy is an autogenerated deepcopy function, copying the receiver, creating a new Event.

### func \(\*Event\) DeepCopyInto

```go
func (in *Event) DeepCopyInto(out *Event)
```

DeepCopyInto is an autogenerated deepcopy function, copying the receiver, writing into out. in must be non\-nil.

## type EventType

EventType defines the possible types of events.

```go
type EventType string
```

```go
const (
    Added    EventType = "ADDED"
    Modified EventType = "MODIFIED"
    Deleted  EventType = "DELETED"
    Bookmark EventType = "BOOKMARK"
    Error    EventType = "ERROR"
)
```

## type FakeWatcher

FakeWatcher lets you test anything that consumes a watch.Interface; threadsafe.

```go
type FakeWatcher struct {
    sync.Mutex
    // contains filtered or unexported fields
}
```

### func NewFake

```go
func NewFake() *FakeWatcher
```

### func NewFakeWithChanSize

```go
func NewFakeWithChanSize(size int, blocking bool) *FakeWatcher
```

### func \(\*FakeWatcher\) Action

```go
func (f *FakeWatcher) Action(action EventType, obj runtime.Object)
```

Action sends an event of the requested type, for table\-based testing.

### func \(\*FakeWatcher\) Add

```go
func (f *FakeWatcher) Add(obj runtime.Object)
```

Add sends an add event.

### func \(\*FakeWatcher\) Delete

```go
func (f *FakeWatcher) Delete(lastValue runtime.Object)
```

Delete sends a delete event.

### func \(\*FakeWatcher\) Error

```go
func (f *FakeWatcher) Error(errValue runtime.Object)
```

Error sends an Error event.

### func \(\*FakeWatcher\) IsStopped

```go
func (f *FakeWatcher) IsStopped() bool
```

### func \(\*FakeWatcher\) Modify

```go
func (f *FakeWatcher) Modify(obj runtime.Object)
```

Modify sends a modify event.

### func \(\*FakeWatcher\) Reset

```go
func (f *FakeWatcher) Reset()
```

Reset prepares the watcher to be reused.

### func \(\*FakeWatcher\) ResultChan

```go
func (f *FakeWatcher) ResultChan() <-chan Event
```

### func \(\*FakeWatcher\) Stop

```go
func (f *FakeWatcher) Stop()
```

Stop implements Interface.Stop\(\).

## type FilterFunc

FilterFunc should take an event, possibly modify it in some way, and return the modified event. If the event should be ignored, then return keep=false.

```go
type FilterFunc func(in Event) (out Event, keep bool)
```

## type FullChannelBehavior

FullChannelBehavior controls how the Broadcaster reacts if a watcher's watch channel is full.

```go
type FullChannelBehavior int
```

```go
const (
    WaitIfChannelFull FullChannelBehavior = iota
    DropIfChannelFull
)
```

## type Interface

Interface can be implemented by anything that knows how to watch and report changes.

```go
type Interface interface {
    // Stops watching. Will close the channel returned by ResultChan(). Releases
    // any resources used by the watch.
    Stop()

    // Returns a chan which will receive all the events. If an error occurs
    // or Stop() is called, the implementation will close this channel and
    // release any resources used by the watch.
    ResultChan() <-chan Event
}
```

### func Filter

```go
func Filter(w Interface, f FilterFunc) Interface
```

Filter passes all events through f before allowing them to pass on. Putting a filter on a watch, as an unavoidable side\-effect due to the way go channels work, effectively causes the watch's event channel to have its queue length increased by one.

WARNING: filter has a fatal flaw, in that it can't properly update the Type field \(Add/Modified/Deleted\) to reflect items beginning to pass the filter when they previously didn't.

### func NewEmptyWatch

```go
func NewEmptyWatch() Interface
```

NewEmptyWatch returns a watch interface that returns no results and is closed. May be used in certain error conditions where no information is available but an error is not warranted.

## type ProxyWatcher

ProxyWatcher lets you wrap your channel in watch Interface. threadsafe.

```go
type ProxyWatcher struct {
    // contains filtered or unexported fields
}
```

### func NewProxyWatcher

```go
func NewProxyWatcher(ch chan Event) *ProxyWatcher
```

NewProxyWatcher creates new ProxyWatcher by wrapping a channel

### func \(\*ProxyWatcher\) ResultChan

```go
func (pw *ProxyWatcher) ResultChan() <-chan Event
```

ResultChan implements Interface

### func \(\*ProxyWatcher\) Stop

```go
func (pw *ProxyWatcher) Stop()
```

Stop implements Interface

### func \(\*ProxyWatcher\) StopChan

```go
func (pw *ProxyWatcher) StopChan() <-chan struct{}
```

StopChan returns stop channel

### func \(\*ProxyWatcher\) Stopping

```go
func (pw *ProxyWatcher) Stopping() bool
```

Stopping returns true if Stop\(\) has been called

## type RaceFreeFakeWatcher

RaceFreeFakeWatcher lets you test anything that consumes a watch.Interface; threadsafe.

```go
type RaceFreeFakeWatcher struct {
    Stopped bool
    sync.Mutex
    // contains filtered or unexported fields
}
```

### func NewRaceFreeFake

```go
func NewRaceFreeFake() *RaceFreeFakeWatcher
```

### func \(\*RaceFreeFakeWatcher\) Action

```go
func (f *RaceFreeFakeWatcher) Action(action EventType, obj runtime.Object)
```

Action sends an event of the requested type, for table\-based testing.

### func \(\*RaceFreeFakeWatcher\) Add

```go
func (f *RaceFreeFakeWatcher) Add(obj runtime.Object)
```

Add sends an add event.

### func \(\*RaceFreeFakeWatcher\) Delete

```go
func (f *RaceFreeFakeWatcher) Delete(lastValue runtime.Object)
```

Delete sends a delete event.

### func \(\*RaceFreeFakeWatcher\) Error

```go
func (f *RaceFreeFakeWatcher) Error(errValue runtime.Object)
```

Error sends an Error event.

### func \(\*RaceFreeFakeWatcher\) IsStopped

```go
func (f *RaceFreeFakeWatcher) IsStopped() bool
```

### func \(\*RaceFreeFakeWatcher\) Modify

```go
func (f *RaceFreeFakeWatcher) Modify(obj runtime.Object)
```

Modify sends a modify event.

### func \(\*RaceFreeFakeWatcher\) Reset

```go
func (f *RaceFreeFakeWatcher) Reset()
```

Reset prepares the watcher to be reused.

### func \(\*RaceFreeFakeWatcher\) ResultChan

```go
func (f *RaceFreeFakeWatcher) ResultChan() <-chan Event
```

### func \(\*RaceFreeFakeWatcher\) Stop

```go
func (f *RaceFreeFakeWatcher) Stop()
```

Stop implements Interface.Stop\(\).

## type Recorder

Recorder records all events that are sent from the watch until it is closed.

```go
type Recorder struct {
    Interface
    // contains filtered or unexported fields
}
```

### func NewRecorder

```go
func NewRecorder(w Interface) *Recorder
```

NewRecorder wraps an Interface and records any changes sent across it.

### func \(\*Recorder\) Events

```go
func (r *Recorder) Events() []Event
```

Events returns a copy of the events sent across this recorder.

## type Reporter

Reporter hides the details of how an error is turned into a runtime.Object for reporting on a watch stream since this package may not import a higher level report.

```go
type Reporter interface {
    // AsObject must convert err into a valid runtime.Object for the watch stream.
    AsObject(err error) runtime.Object
}
```

## type StreamWatcher

StreamWatcher turns any stream for which you can write a Decoder interface into a watch.Interface.

```go
type StreamWatcher struct {
    sync.Mutex
    // contains filtered or unexported fields
}
```

### func NewStreamWatcher

```go
func NewStreamWatcher(d Decoder, r Reporter) *StreamWatcher
```

NewStreamWatcher creates a StreamWatcher from the given decoder.

### func \(\*StreamWatcher\) ResultChan

```go
func (sw *StreamWatcher) ResultChan() <-chan Event
```

ResultChan implements Interface.

### func \(\*StreamWatcher\) Stop

```go
func (sw *StreamWatcher) Stop()
```

Stop implements Interface.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

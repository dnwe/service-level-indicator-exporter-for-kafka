<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# cryptoservice

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/theupdateframework/notary/cryptoservice"
```

## Index

- [Variables](<#variables>)
- [func CheckRootKeyIsEncrypted(pemBytes []byte) error](<#func-checkrootkeyisencrypted>)
- [func GenerateCertificate(rootKey data.PrivateKey, gun data.GUN, startTime, endTime time.Time) (*x509.Certificate, error)](<#func-generatecertificate>)
- [type CryptoService](<#type-cryptoservice>)
  - [func NewCryptoService(keyStores ...trustmanager.KeyStore) *CryptoService](<#func-newcryptoservice>)
  - [func (cs *CryptoService) AddKey(role data.RoleName, gun data.GUN, key data.PrivateKey) (err error)](<#func-cryptoservice-addkey>)
  - [func (cs *CryptoService) Create(role data.RoleName, gun data.GUN, algorithm string) (data.PublicKey, error)](<#func-cryptoservice-create>)
  - [func (cs *CryptoService) GetKey(keyID string) data.PublicKey](<#func-cryptoservice-getkey>)
  - [func (cs *CryptoService) GetKeyInfo(keyID string) (trustmanager.KeyInfo, error)](<#func-cryptoservice-getkeyinfo>)
  - [func (cs *CryptoService) GetPrivateKey(keyID string) (k data.PrivateKey, role data.RoleName, err error)](<#func-cryptoservice-getprivatekey>)
  - [func (cs *CryptoService) ListAllKeys() map[string]data.RoleName](<#func-cryptoservice-listallkeys>)
  - [func (cs *CryptoService) ListKeys(role data.RoleName) []string](<#func-cryptoservice-listkeys>)
  - [func (cs *CryptoService) RemoveKey(keyID string) (err error)](<#func-cryptoservice-removekey>)


## Variables

```go
var (
    // ErrNoValidPrivateKey is returned if a key being imported doesn't
    // look like a private key
    ErrNoValidPrivateKey = errors.New("no valid private key found")

    // ErrRootKeyNotEncrypted is returned if a root key being imported is
    // unencrypted
    ErrRootKeyNotEncrypted = errors.New("only encrypted root keys may be imported")

    // EmptyService is an empty crypto service
    EmptyService = NewCryptoService()
)
```

## func CheckRootKeyIsEncrypted

```go
func CheckRootKeyIsEncrypted(pemBytes []byte) error
```

CheckRootKeyIsEncrypted makes sure the root key is encrypted. We have internal assumptions that depend on this.

## func GenerateCertificate

```go
func GenerateCertificate(rootKey data.PrivateKey, gun data.GUN, startTime, endTime time.Time) (*x509.Certificate, error)
```

GenerateCertificate generates an X509 Certificate from a template, given a GUN and validity interval

## type CryptoService

CryptoService implements Sign and Create, holding a specific GUN and keystore to operate on

```go
type CryptoService struct {
    // contains filtered or unexported fields
}
```

### func NewCryptoService

```go
func NewCryptoService(keyStores ...trustmanager.KeyStore) *CryptoService
```

NewCryptoService returns an instance of CryptoService

### func \(\*CryptoService\) AddKey

```go
func (cs *CryptoService) AddKey(role data.RoleName, gun data.GUN, key data.PrivateKey) (err error)
```

AddKey adds a private key to a specified role. The GUN is inferred from the cryptoservice itself for non\-root roles

### func \(\*CryptoService\) Create

```go
func (cs *CryptoService) Create(role data.RoleName, gun data.GUN, algorithm string) (data.PublicKey, error)
```

Create is used to generate keys for targets, snapshots and timestamps

### func \(\*CryptoService\) GetKey

```go
func (cs *CryptoService) GetKey(keyID string) data.PublicKey
```

GetKey returns a key by ID

### func \(\*CryptoService\) GetKeyInfo

```go
func (cs *CryptoService) GetKeyInfo(keyID string) (trustmanager.KeyInfo, error)
```

GetKeyInfo returns role and GUN info of a key by ID

### func \(\*CryptoService\) GetPrivateKey

```go
func (cs *CryptoService) GetPrivateKey(keyID string) (k data.PrivateKey, role data.RoleName, err error)
```

GetPrivateKey returns a private key and role if present by ID.

### func \(\*CryptoService\) ListAllKeys

```go
func (cs *CryptoService) ListAllKeys() map[string]data.RoleName
```

ListAllKeys returns a map of key IDs to role

### func \(\*CryptoService\) ListKeys

```go
func (cs *CryptoService) ListKeys(role data.RoleName) []string
```

ListKeys returns a list of key IDs valid for the given role

### func \(\*CryptoService\) RemoveKey

```go
func (cs *CryptoService) RemoveKey(keyID string) (err error)
```

RemoveKey deletes a key by ID



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

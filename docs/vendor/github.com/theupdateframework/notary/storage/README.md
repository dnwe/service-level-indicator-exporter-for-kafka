<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# storage

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/theupdateframework/notary/storage"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func NewMultiPartMetaRequest(url string, metas map[string][]byte) (*http.Request, error)](<#func-newmultipartmetarequest>)
- [type Bootstrapper](<#type-bootstrapper>)
- [type ErrInvalidOperation](<#type-errinvalidoperation>)
  - [func (err ErrInvalidOperation) Error() string](<#func-errinvalidoperation-error>)
- [type ErrMaliciousServer](<#type-errmaliciousserver>)
  - [func (err ErrMaliciousServer) Error() string](<#func-errmaliciousserver-error>)
- [type ErrMetaNotFound](<#type-errmetanotfound>)
  - [func (err ErrMetaNotFound) Error() string](<#func-errmetanotfound-error>)
- [type ErrOffline](<#type-erroffline>)
  - [func (e ErrOffline) Error() string](<#func-erroffline-error>)
- [type ErrServerUnavailable](<#type-errserverunavailable>)
  - [func (err ErrServerUnavailable) Error() string](<#func-errserverunavailable-error>)
- [type FilesystemStore](<#type-filesystemstore>)
  - [func NewFileStore(baseDir, fileExt string) (*FilesystemStore, error)](<#func-newfilestore>)
  - [func NewPrivateKeyFileStorage(baseDir, fileExt string) (*FilesystemStore, error)](<#func-newprivatekeyfilestorage>)
  - [func NewPrivateSimpleFileStore(baseDir, fileExt string) (*FilesystemStore, error)](<#func-newprivatesimplefilestore>)
  - [func (f *FilesystemStore) Get(name string) ([]byte, error)](<#func-filesystemstore-get>)
  - [func (f *FilesystemStore) GetSized(name string, size int64) ([]byte, error)](<#func-filesystemstore-getsized>)
  - [func (f FilesystemStore) ListFiles() []string](<#func-filesystemstore-listfiles>)
  - [func (f FilesystemStore) Location() string](<#func-filesystemstore-location>)
  - [func (f *FilesystemStore) Remove(name string) error](<#func-filesystemstore-remove>)
  - [func (f *FilesystemStore) RemoveAll() error](<#func-filesystemstore-removeall>)
  - [func (f *FilesystemStore) Set(name string, meta []byte) error](<#func-filesystemstore-set>)
  - [func (f *FilesystemStore) SetMulti(metas map[string][]byte) error](<#func-filesystemstore-setmulti>)
- [type HTTPStore](<#type-httpstore>)
  - [func (s HTTPStore) GetKey(role data.RoleName) ([]byte, error)](<#func-httpstore-getkey>)
  - [func (s HTTPStore) GetSized(name string, size int64) ([]byte, error)](<#func-httpstore-getsized>)
  - [func (s HTTPStore) Location() string](<#func-httpstore-location>)
  - [func (s HTTPStore) Remove(name string) error](<#func-httpstore-remove>)
  - [func (s HTTPStore) RemoveAll() error](<#func-httpstore-removeall>)
  - [func (s HTTPStore) RotateKey(role data.RoleName) ([]byte, error)](<#func-httpstore-rotatekey>)
  - [func (s HTTPStore) Set(name string, blob []byte) error](<#func-httpstore-set>)
  - [func (s HTTPStore) SetMulti(metas map[string][]byte) error](<#func-httpstore-setmulti>)
- [type MemoryStore](<#type-memorystore>)
  - [func NewMemoryStore(seed map[data.RoleName][]byte) *MemoryStore](<#func-newmemorystore>)
  - [func (m MemoryStore) Get(name string) ([]byte, error)](<#func-memorystore-get>)
  - [func (m MemoryStore) GetSized(name string, size int64) ([]byte, error)](<#func-memorystore-getsized>)
  - [func (m *MemoryStore) ListFiles() []string](<#func-memorystore-listfiles>)
  - [func (m MemoryStore) Location() string](<#func-memorystore-location>)
  - [func (m *MemoryStore) Remove(name string) error](<#func-memorystore-remove>)
  - [func (m *MemoryStore) RemoveAll() error](<#func-memorystore-removeall>)
  - [func (m *MemoryStore) Set(name string, meta []byte) error](<#func-memorystore-set>)
  - [func (m *MemoryStore) SetMulti(metas map[string][]byte) error](<#func-memorystore-setmulti>)
- [type MetadataStore](<#type-metadatastore>)
- [type NetworkError](<#type-networkerror>)
  - [func (n NetworkError) Error() string](<#func-networkerror-error>)
- [type OfflineStore](<#type-offlinestore>)
  - [func (es OfflineStore) GetKey(role data.RoleName) ([]byte, error)](<#func-offlinestore-getkey>)
  - [func (es OfflineStore) GetSized(name string, size int64) ([]byte, error)](<#func-offlinestore-getsized>)
  - [func (es OfflineStore) Location() string](<#func-offlinestore-location>)
  - [func (es OfflineStore) Remove(name string) error](<#func-offlinestore-remove>)
  - [func (es OfflineStore) RemoveAll() error](<#func-offlinestore-removeall>)
  - [func (es OfflineStore) RotateKey(role data.RoleName) ([]byte, error)](<#func-offlinestore-rotatekey>)
  - [func (es OfflineStore) Set(name string, blob []byte) error](<#func-offlinestore-set>)
  - [func (es OfflineStore) SetMulti(map[string][]byte) error](<#func-offlinestore-setmulti>)
- [type PublicKeyStore](<#type-publickeystore>)
- [type RemoteStore](<#type-remotestore>)
  - [func NewHTTPStore(baseURL, metaPrefix, metaExtension, keyExtension string, roundTrip http.RoundTripper) (RemoteStore, error)](<#func-newhttpstore>)
  - [func NewNotaryServerStore(serverURL string, gun data.GUN, roundTrip http.RoundTripper) (RemoteStore, error)](<#func-newnotaryserverstore>)


## Constants

```go
const (
    // MaxErrorResponseSize is the maximum size for an error message - 1KiB
    MaxErrorResponseSize int64 = 1 << 10
    // MaxKeySize is the maximum size for a stored TUF key - 256KiB
    MaxKeySize = 256 << 10
)
```

NoSizeLimit is represented as \-1 for arguments to GetMeta

```go
const NoSizeLimit int64 = -1
```

## Variables

```go
var (
    // ErrPathOutsideStore indicates that the returned path would be
    // outside the store
    ErrPathOutsideStore = errors.New("path outside file store")
)
```

## func NewMultiPartMetaRequest

```go
func NewMultiPartMetaRequest(url string, metas map[string][]byte) (*http.Request, error)
```

NewMultiPartMetaRequest builds a request with the provided metadata updates in multipart form

## type Bootstrapper

Bootstrapper is a thing that can set itself up

```go
type Bootstrapper interface {
    // Bootstrap instructs a configured Bootstrapper to perform
    // its setup operations.
    Bootstrap() error
}
```

## type ErrInvalidOperation

ErrInvalidOperation indicates that the server returned a 400 response and propagate any body we received.

```go
type ErrInvalidOperation struct {
    // contains filtered or unexported fields
}
```

### func \(ErrInvalidOperation\) Error

```go
func (err ErrInvalidOperation) Error() string
```

## type ErrMaliciousServer

ErrMaliciousServer indicates the server returned a response that is highly suspected of being malicious. i.e. it attempted to send us more data than the known size of a particular role metadata.

```go
type ErrMaliciousServer struct{}
```

### func \(ErrMaliciousServer\) Error

```go
func (err ErrMaliciousServer) Error() string
```

## type ErrMetaNotFound

ErrMetaNotFound indicates we did not find a particular piece of metadata in the store

```go
type ErrMetaNotFound struct {
    Resource string
}
```

### func \(ErrMetaNotFound\) Error

```go
func (err ErrMetaNotFound) Error() string
```

## type ErrOffline

ErrOffline is used to indicate we are operating offline

```go
type ErrOffline struct{}
```

### func \(ErrOffline\) Error

```go
func (e ErrOffline) Error() string
```

## type ErrServerUnavailable

ErrServerUnavailable indicates an error from the server. code allows us to populate the http error we received

```go
type ErrServerUnavailable struct {
    // contains filtered or unexported fields
}
```

### func \(ErrServerUnavailable\) Error

```go
func (err ErrServerUnavailable) Error() string
```

## type FilesystemStore

FilesystemStore is a store in a locally accessible directory

```go
type FilesystemStore struct {
    // contains filtered or unexported fields
}
```

### func NewFileStore

```go
func NewFileStore(baseDir, fileExt string) (*FilesystemStore, error)
```

NewFileStore creates a fully configurable file store

### func NewPrivateKeyFileStorage

```go
func NewPrivateKeyFileStorage(baseDir, fileExt string) (*FilesystemStore, error)
```

NewPrivateKeyFileStorage initializes a new filestore for private keys, appending the notary.PrivDir to the baseDir.

### func NewPrivateSimpleFileStore

```go
func NewPrivateSimpleFileStore(baseDir, fileExt string) (*FilesystemStore, error)
```

NewPrivateSimpleFileStore is a wrapper to create an owner readable/writeable \_only\_ filestore

### func \(\*FilesystemStore\) Get

```go
func (f *FilesystemStore) Get(name string) ([]byte, error)
```

Get returns the meta for the given name.

### func \(\*FilesystemStore\) GetSized

```go
func (f *FilesystemStore) GetSized(name string, size int64) ([]byte, error)
```

GetSized returns the meta for the given name \(a role\) up to size bytes If size is "NoSizeLimit", this corresponds to "infinite," but we cut off at a predefined threshold "notary.MaxDownloadSize". If the file is larger than size we return ErrMaliciousServer for consistency with the HTTPStore

### func \(FilesystemStore\) ListFiles

```go
func (f FilesystemStore) ListFiles() []string
```

ListFiles returns a list of all the filenames that can be used with Get\* to retrieve content from this filestore

### func \(FilesystemStore\) Location

```go
func (f FilesystemStore) Location() string
```

Location returns a human readable name for the storage location

### func \(\*FilesystemStore\) Remove

```go
func (f *FilesystemStore) Remove(name string) error
```

Remove removes the metadata for a single role \- if the metadata doesn't exist, no error is returned

### func \(\*FilesystemStore\) RemoveAll

```go
func (f *FilesystemStore) RemoveAll() error
```

RemoveAll clears the existing filestore by removing its base directory

### func \(\*FilesystemStore\) Set

```go
func (f *FilesystemStore) Set(name string, meta []byte) error
```

Set sets the meta for a single role

### func \(\*FilesystemStore\) SetMulti

```go
func (f *FilesystemStore) SetMulti(metas map[string][]byte) error
```

SetMulti sets the metadata for multiple roles in one operation

## type HTTPStore

HTTPStore manages pulling and pushing metadata from and to a remote service over HTTP. It assumes the URL structure of the remote service maps identically to the structure of the TUF repo: \<baseURL\>/\<metaPrefix\>/\(root|targets|snapshot|timestamp\).json \<baseURL\>/\<targetsPrefix\>/foo.sh

If consistent snapshots are disabled, it is advised that caching is not enabled. Simple set a cachePath \(and ensure it's writeable\) to enable caching.

```go
type HTTPStore struct {
    // contains filtered or unexported fields
}
```

### func \(HTTPStore\) GetKey

```go
func (s HTTPStore) GetKey(role data.RoleName) ([]byte, error)
```

GetKey retrieves a public key from the remote server

### func \(HTTPStore\) GetSized

```go
func (s HTTPStore) GetSized(name string, size int64) ([]byte, error)
```

GetSized downloads the named meta file with the given size. A short body is acceptable because in the case of timestamp.json, the size is a cap, not an exact length. If size is "NoSizeLimit", this corresponds to "infinite," but we cut off at a predefined threshold "notary.MaxDownloadSize".

### func \(HTTPStore\) Location

```go
func (s HTTPStore) Location() string
```

Location returns a human readable name for the storage location

### func \(HTTPStore\) Remove

```go
func (s HTTPStore) Remove(name string) error
```

Remove always fails, because we should never be able to delete metadata remotely

### func \(HTTPStore\) RemoveAll

```go
func (s HTTPStore) RemoveAll() error
```

RemoveAll will attempt to delete all TUF metadata for a GUN

### func \(HTTPStore\) RotateKey

```go
func (s HTTPStore) RotateKey(role data.RoleName) ([]byte, error)
```

RotateKey rotates a private key and returns the public component from the remote server

### func \(HTTPStore\) Set

```go
func (s HTTPStore) Set(name string, blob []byte) error
```

Set sends a single piece of metadata to the TUF server

### func \(HTTPStore\) SetMulti

```go
func (s HTTPStore) SetMulti(metas map[string][]byte) error
```

SetMulti does a single batch upload of multiple pieces of TUF metadata. This should be preferred for updating a remote server as it enable the server to remain consistent, either accepting or rejecting the complete update.

## type MemoryStore

MemoryStore implements a mock RemoteStore entirely in memory. For testing purposes only.

```go
type MemoryStore struct {
    // contains filtered or unexported fields
}
```

### func NewMemoryStore

```go
func NewMemoryStore(seed map[data.RoleName][]byte) *MemoryStore
```

NewMemoryStore returns a MetadataStore that operates entirely in memory. Very useful for testing

### func \(MemoryStore\) Get

```go
func (m MemoryStore) Get(name string) ([]byte, error)
```

Get returns the data associated with name

### func \(MemoryStore\) GetSized

```go
func (m MemoryStore) GetSized(name string, size int64) ([]byte, error)
```

GetSized returns up to size bytes of data references by name. If size is "NoSizeLimit", this corresponds to "infinite," but we cut off at a predefined threshold "notary.MaxDownloadSize", as we will always know the size for everything but a timestamp and sometimes a root, neither of which should be exceptionally large

### func \(\*MemoryStore\) ListFiles

```go
func (m *MemoryStore) ListFiles() []string
```

ListFiles returns a list of all files. The names returned should be usable with Get directly, with no modification.

### func \(MemoryStore\) Location

```go
func (m MemoryStore) Location() string
```

Location provides a human readable name for the storage location

### func \(\*MemoryStore\) Remove

```go
func (m *MemoryStore) Remove(name string) error
```

Remove removes the metadata for a single role \- if the metadata doesn't exist, no error is returned

### func \(\*MemoryStore\) RemoveAll

```go
func (m *MemoryStore) RemoveAll() error
```

RemoveAll clears the existing memory store by setting this store as new empty one

### func \(\*MemoryStore\) Set

```go
func (m *MemoryStore) Set(name string, meta []byte) error
```

Set sets the metadata value for the given name

### func \(\*MemoryStore\) SetMulti

```go
func (m *MemoryStore) SetMulti(metas map[string][]byte) error
```

SetMulti sets multiple pieces of metadata for multiple names in a single operation.

## type MetadataStore

MetadataStore must be implemented by anything that intends to interact with a store of TUF files

```go
type MetadataStore interface {
    GetSized(name string, size int64) ([]byte, error)
    Set(name string, blob []byte) error
    SetMulti(map[string][]byte) error
    RemoveAll() error
    Remove(name string) error
    Location() string
}
```

## type NetworkError

NetworkError represents any kind of network error when attempting to make a request

```go
type NetworkError struct {
    Wrapped error
}
```

### func \(NetworkError\) Error

```go
func (n NetworkError) Error() string
```

## type OfflineStore

OfflineStore is to be used as a placeholder for a nil store. It simply returns ErrOffline for every operation

```go
type OfflineStore struct{}
```

### func \(OfflineStore\) GetKey

```go
func (es OfflineStore) GetKey(role data.RoleName) ([]byte, error)
```

GetKey returns ErrOffline

### func \(OfflineStore\) GetSized

```go
func (es OfflineStore) GetSized(name string, size int64) ([]byte, error)
```

GetSized returns ErrOffline

### func \(OfflineStore\) Location

```go
func (es OfflineStore) Location() string
```

Location returns a human readable name for the storage location

### func \(OfflineStore\) Remove

```go
func (es OfflineStore) Remove(name string) error
```

Remove returns ErrOffline

### func \(OfflineStore\) RemoveAll

```go
func (es OfflineStore) RemoveAll() error
```

RemoveAll return ErrOffline

### func \(OfflineStore\) RotateKey

```go
func (es OfflineStore) RotateKey(role data.RoleName) ([]byte, error)
```

RotateKey returns ErrOffline

### func \(OfflineStore\) Set

```go
func (es OfflineStore) Set(name string, blob []byte) error
```

Set returns ErrOffline

### func \(OfflineStore\) SetMulti

```go
func (es OfflineStore) SetMulti(map[string][]byte) error
```

SetMulti returns ErrOffline

## type PublicKeyStore

PublicKeyStore must be implemented by a key service

```go
type PublicKeyStore interface {
    GetKey(role data.RoleName) ([]byte, error)
    RotateKey(role data.RoleName) ([]byte, error)
}
```

## type RemoteStore

RemoteStore is similar to LocalStore with the added expectation that it should provide a way to download targets once located

```go
type RemoteStore interface {
    MetadataStore
    PublicKeyStore
}
```

### func NewHTTPStore

```go
func NewHTTPStore(baseURL, metaPrefix, metaExtension, keyExtension string, roundTrip http.RoundTripper) (RemoteStore, error)
```

NewHTTPStore initializes a new store against a URL and a number of configuration options.

In case of a nil \`roundTrip\`, a default offline store is used instead.

### func NewNotaryServerStore

```go
func NewNotaryServerStore(serverURL string, gun data.GUN, roundTrip http.RoundTripper) (RemoteStore, error)
```

NewNotaryServerStore returns a new HTTPStore against a URL which should represent a notary server



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

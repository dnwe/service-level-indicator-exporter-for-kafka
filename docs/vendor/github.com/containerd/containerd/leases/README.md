<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# leases

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/containerd/containerd/leases"
```

## Index

- [Constants](<#constants>)
- [func FromContext(ctx context.Context) (string, bool)](<#func-fromcontext>)
- [func SynchronousDelete(ctx context.Context, o *DeleteOptions) error](<#func-synchronousdelete>)
- [func WithLease(ctx context.Context, lid string) context.Context](<#func-withlease>)
- [type DeleteOpt](<#type-deleteopt>)
- [type DeleteOptions](<#type-deleteoptions>)
- [type Lease](<#type-lease>)
- [type Manager](<#type-manager>)
- [type Opt](<#type-opt>)
  - [func WithExpiration(d time.Duration) Opt](<#func-withexpiration>)
  - [func WithID(id string) Opt](<#func-withid>)
  - [func WithLabels(labels map[string]string) Opt](<#func-withlabels>)
  - [func WithRandomID() Opt](<#func-withrandomid>)
- [type Resource](<#type-resource>)


## Constants

```go
const (
    // GRPCHeader defines the header name for specifying a containerd lease.
    GRPCHeader = "containerd-lease"
)
```

## func FromContext

```go
func FromContext(ctx context.Context) (string, bool)
```

FromContext returns the lease from the context.

## func SynchronousDelete

```go
func SynchronousDelete(ctx context.Context, o *DeleteOptions) error
```

SynchronousDelete is used to indicate that a lease deletion and removal of any unreferenced resources should occur synchronously before returning the result.

## func WithLease

```go
func WithLease(ctx context.Context, lid string) context.Context
```

WithLease sets a given lease on the context

## type DeleteOpt

DeleteOpt allows configuring a delete operation

```go
type DeleteOpt func(context.Context, *DeleteOptions) error
```

## type DeleteOptions

DeleteOptions provide options on image delete

```go
type DeleteOptions struct {
    Synchronous bool
}
```

## type Lease

Lease retains resources to prevent cleanup before the resources can be fully referenced.

```go
type Lease struct {
    ID        string
    CreatedAt time.Time
    Labels    map[string]string
}
```

## type Manager

Manager is used to create, list, and remove leases

```go
type Manager interface {
    Create(context.Context, ...Opt) (Lease, error)
    Delete(context.Context, Lease, ...DeleteOpt) error
    List(context.Context, ...string) ([]Lease, error)
    AddResource(context.Context, Lease, Resource) error
    DeleteResource(context.Context, Lease, Resource) error
    ListResources(context.Context, Lease) ([]Resource, error)
}
```

## type Opt

Opt is used to set options on a lease

```go
type Opt func(*Lease) error
```

### func WithExpiration

```go
func WithExpiration(d time.Duration) Opt
```

WithExpiration sets an expiration on the lease

### func WithID

```go
func WithID(id string) Opt
```

WithID sets the ID for the lease

### func WithLabels

```go
func WithLabels(labels map[string]string) Opt
```

WithLabels merges labels on a lease

### func WithRandomID

```go
func WithRandomID() Opt
```

WithRandomID sets the lease ID to a random unique value

## type Resource

Resource represents low level resource of image, like content, ingest and snapshotter.

```go
type Resource struct {
    ID   string
    Type string
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

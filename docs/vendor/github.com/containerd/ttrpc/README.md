<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# ttrpc

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/containerd/ttrpc"
```

## Index

- [Variables](<#variables>)
- [func GetMetadataValue(ctx context.Context, name string) (string, bool)](<#func-getmetadatavalue>)
- [func WithMetadata(ctx context.Context, md MD) context.Context](<#func-withmetadata>)
- [type Client](<#type-client>)
  - [func NewClient(conn net.Conn, opts ...ClientOpts) *Client](<#func-newclient>)
  - [func (c *Client) Call(ctx context.Context, service, method string, req, resp interface{}) error](<#func-client-call>)
  - [func (c *Client) Close() error](<#func-client-close>)
  - [func (c *Client) UserOnCloseWait(ctx context.Context) error](<#func-client-useronclosewait>)
- [type ClientOpts](<#type-clientopts>)
  - [func WithOnClose(onClose func()) ClientOpts](<#func-withonclose>)
  - [func WithUnaryClientInterceptor(i UnaryClientInterceptor) ClientOpts](<#func-withunaryclientinterceptor>)
- [type Handshaker](<#type-handshaker>)
- [type Invoker](<#type-invoker>)
- [type KeyValue](<#type-keyvalue>)
  - [func (*KeyValue) ProtoMessage()](<#func-keyvalue-protomessage>)
  - [func (m *KeyValue) Reset()](<#func-keyvalue-reset>)
  - [func (m *KeyValue) String() string](<#func-keyvalue-string>)
- [type MD](<#type-md>)
  - [func GetMetadata(ctx context.Context) (MD, bool)](<#func-getmetadata>)
  - [func (m MD) Append(key string, values ...string)](<#func-md-append>)
  - [func (m MD) Get(key string) ([]string, bool)](<#func-md-get>)
  - [func (m MD) Set(key string, values ...string)](<#func-md-set>)
- [type Method](<#type-method>)
- [type Request](<#type-request>)
  - [func (r *Request) ProtoMessage()](<#func-request-protomessage>)
  - [func (r *Request) Reset()](<#func-request-reset>)
  - [func (r *Request) String() string](<#func-request-string>)
- [type Response](<#type-response>)
  - [func (r *Response) ProtoMessage()](<#func-response-protomessage>)
  - [func (r *Response) Reset()](<#func-response-reset>)
  - [func (r *Response) String() string](<#func-response-string>)
- [type Server](<#type-server>)
  - [func NewServer(opts ...ServerOpt) (*Server, error)](<#func-newserver>)
  - [func (s *Server) Close() error](<#func-server-close>)
  - [func (s *Server) Register(name string, methods map[string]Method)](<#func-server-register>)
  - [func (s *Server) Serve(ctx context.Context, l net.Listener) error](<#func-server-serve>)
  - [func (s *Server) Shutdown(ctx context.Context) error](<#func-server-shutdown>)
- [type ServerOpt](<#type-serveropt>)
  - [func WithServerHandshaker(handshaker Handshaker) ServerOpt](<#func-withserverhandshaker>)
  - [func WithUnaryServerInterceptor(i UnaryServerInterceptor) ServerOpt](<#func-withunaryserverinterceptor>)
- [type ServiceDesc](<#type-servicedesc>)
- [type StringList](<#type-stringlist>)
  - [func (r *StringList) ProtoMessage()](<#func-stringlist-protomessage>)
  - [func (r *StringList) Reset()](<#func-stringlist-reset>)
  - [func (r *StringList) String() string](<#func-stringlist-string>)
- [type UnaryClientInfo](<#type-unaryclientinfo>)
- [type UnaryClientInterceptor](<#type-unaryclientinterceptor>)
- [type UnaryServerInfo](<#type-unaryserverinfo>)
- [type UnaryServerInterceptor](<#type-unaryserverinterceptor>)
- [type Unmarshaler](<#type-unmarshaler>)


## Variables

ErrClosed is returned by client methods when the underlying connection is closed.

```go
var ErrClosed = errors.New("ttrpc: closed")
```

```go
var (
    ErrServerClosed = errors.New("ttrpc: server closed")
)
```

## func GetMetadataValue

```go
func GetMetadataValue(ctx context.Context, name string) (string, bool)
```

GetMetadataValue gets a specific metadata value by name from context.Context

## func WithMetadata

```go
func WithMetadata(ctx context.Context, md MD) context.Context
```

WithMetadata attaches metadata map to a context.Context

## type Client

Client for a ttrpc server

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func NewClient

```go
func NewClient(conn net.Conn, opts ...ClientOpts) *Client
```

### func \(\*Client\) Call

```go
func (c *Client) Call(ctx context.Context, service, method string, req, resp interface{}) error
```

### func \(\*Client\) Close

```go
func (c *Client) Close() error
```

### func \(\*Client\) UserOnCloseWait

```go
func (c *Client) UserOnCloseWait(ctx context.Context) error
```

UserOnCloseWait is used to blocks untils the user's on\-close callback finishes.

## type ClientOpts

ClientOpts configures a client

```go
type ClientOpts func(c *Client)
```

### func WithOnClose

```go
func WithOnClose(onClose func()) ClientOpts
```

WithOnClose sets the close func whenever the client's Close\(\) method is called

### func WithUnaryClientInterceptor

```go
func WithUnaryClientInterceptor(i UnaryClientInterceptor) ClientOpts
```

WithUnaryClientInterceptor sets the provided client interceptor

## type Handshaker

Handshaker defines the interface for connection handshakes performed on the server or client when first connecting.

```go
type Handshaker interface {
    // Handshake should confirm or decorate a connection that may be incoming
    // to a server or outgoing from a client.
    //
    // If this returns without an error, the caller should use the connection
    // in place of the original connection.
    //
    // The second return value can contain credential specific data, such as
    // unix socket credentials or TLS information.
    //
    // While we currently only have implementations on the server-side, this
    // interface should be sufficient to implement similar handshakes on the
    // client-side.
    Handshake(ctx context.Context, conn net.Conn) (net.Conn, interface{}, error)
}
```

## type Invoker

Invoker invokes the client's request and response from the ttrpc server

```go
type Invoker func(context.Context, *Request, *Response) error
```

## type KeyValue

```go
type KeyValue struct {
    Key   string `protobuf:"bytes,1,opt,name=key,proto3"`
    Value string `protobuf:"bytes,2,opt,name=value,proto3"`
}
```

### func \(\*KeyValue\) ProtoMessage

```go
func (*KeyValue) ProtoMessage()
```

### func \(\*KeyValue\) Reset

```go
func (m *KeyValue) Reset()
```

### func \(\*KeyValue\) String

```go
func (m *KeyValue) String() string
```

## type MD

MD is the user type for ttrpc metadata

```go
type MD map[string][]string
```

### func GetMetadata

```go
func GetMetadata(ctx context.Context) (MD, bool)
```

GetMetadata retrieves metadata from context.Context \(previously attached with WithMetadata\)

### func \(MD\) Append

```go
func (m MD) Append(key string, values ...string)
```

Append appends additional values to the given key.

### func \(MD\) Get

```go
func (m MD) Get(key string) ([]string, bool)
```

Get returns the metadata for a given key when they exist. If there is no metadata, a nil slice and false are returned.

### func \(MD\) Set

```go
func (m MD) Set(key string, values ...string)
```

Set sets the provided values for a given key. The values will overwrite any existing values. If no values provided, a key will be deleted.

## type Method

```go
type Method func(ctx context.Context, unmarshal func(interface{}) error) (interface{}, error)
```

## type Request

```go
type Request struct {
    Service     string      `protobuf:"bytes,1,opt,name=service,proto3"`
    Method      string      `protobuf:"bytes,2,opt,name=method,proto3"`
    Payload     []byte      `protobuf:"bytes,3,opt,name=payload,proto3"`
    TimeoutNano int64       `protobuf:"varint,4,opt,name=timeout_nano,proto3"`
    Metadata    []*KeyValue `protobuf:"bytes,5,rep,name=metadata,proto3"`
}
```

### func \(\*Request\) ProtoMessage

```go
func (r *Request) ProtoMessage()
```

### func \(\*Request\) Reset

```go
func (r *Request) Reset()
```

### func \(\*Request\) String

```go
func (r *Request) String() string
```

## type Response

```go
type Response struct {
    Status  *spb.Status `protobuf:"bytes,1,opt,name=status,proto3"`
    Payload []byte      `protobuf:"bytes,2,opt,name=payload,proto3"`
}
```

### func \(\*Response\) ProtoMessage

```go
func (r *Response) ProtoMessage()
```

### func \(\*Response\) Reset

```go
func (r *Response) Reset()
```

### func \(\*Response\) String

```go
func (r *Response) String() string
```

## type Server

```go
type Server struct {
    // contains filtered or unexported fields
}
```

### func NewServer

```go
func NewServer(opts ...ServerOpt) (*Server, error)
```

### func \(\*Server\) Close

```go
func (s *Server) Close() error
```

Close the server without waiting for active connections.

### func \(\*Server\) Register

```go
func (s *Server) Register(name string, methods map[string]Method)
```

### func \(\*Server\) Serve

```go
func (s *Server) Serve(ctx context.Context, l net.Listener) error
```

### func \(\*Server\) Shutdown

```go
func (s *Server) Shutdown(ctx context.Context) error
```

## type ServerOpt

ServerOpt for configuring a ttrpc server

```go
type ServerOpt func(*serverConfig) error
```

### func WithServerHandshaker

```go
func WithServerHandshaker(handshaker Handshaker) ServerOpt
```

WithServerHandshaker can be passed to NewServer to ensure that the handshaker is called before every connection attempt.

Only one handshaker is allowed per server.

### func WithUnaryServerInterceptor

```go
func WithUnaryServerInterceptor(i UnaryServerInterceptor) ServerOpt
```

WithUnaryServerInterceptor sets the provided interceptor on the server

## type ServiceDesc

```go
type ServiceDesc struct {
    Methods map[string]Method
}
```

## type StringList

```go
type StringList struct {
    List []string `protobuf:"bytes,1,rep,name=list,proto3"`
}
```

### func \(\*StringList\) ProtoMessage

```go
func (r *StringList) ProtoMessage()
```

### func \(\*StringList\) Reset

```go
func (r *StringList) Reset()
```

### func \(\*StringList\) String

```go
func (r *StringList) String() string
```

## type UnaryClientInfo

UnaryClientInfo provides information about the client request

```go
type UnaryClientInfo struct {
    FullMethod string
}
```

## type UnaryClientInterceptor

UnaryClientInterceptor specifies the interceptor function for client request/response

```go
type UnaryClientInterceptor func(context.Context, *Request, *Response, *UnaryClientInfo, Invoker) error
```

## type UnaryServerInfo

UnaryServerInfo provides information about the server request

```go
type UnaryServerInfo struct {
    FullMethod string
}
```

## type UnaryServerInterceptor

UnaryServerInterceptor specifies the interceptor function for server request/response

```go
type UnaryServerInterceptor func(context.Context, Unmarshaler, *UnaryServerInfo, Method) (interface{}, error)
```

## type Unmarshaler

Unmarshaler contains the server request data and allows it to be unmarshaled into a concrete type

```go
type Unmarshaler func(interface{}) error
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# compose

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/docker/compose/v2/pkg/compose"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func InDependencyOrder(ctx context.Context, project *types.Project, fn func(context.Context, string) error, options ...func(*graphTraversal)) error](<#func-independencyorder>)
- [func InReverseDependencyOrder(ctx context.Context, project *types.Project, fn func(context.Context, string) error) error](<#func-inreversedependencyorder>)
- [func NewComposeService(dockerCli command.Cli) api.Service](<#func-newcomposeservice>)
- [func ServiceHash(o types.ServiceConfig) (string, error)](<#func-servicehash>)
- [func ToMobyEnv(environment compose.MappingWithEquals) []string](<#func-tomobyenv>)
- [func ToMobyHealthCheck(check *compose.HealthCheckConfig) *container.HealthConfig](<#func-tomobyhealthcheck>)
- [func ToSeconds(d *compose.Duration) *int](<#func-toseconds>)
- [func WrapCategorisedComposeError(err error, failure FailureCategory) error](<#func-wrapcategorisedcomposeerror>)
- [func WrapComposeError(err error) error](<#func-wrapcomposeerror>)
- [type ContainerStdin](<#type-containerstdin>)
  - [func (c ContainerStdin) Close() error](<#func-containerstdin-close>)
  - [func (c ContainerStdin) Write(p []byte) (n int, err error)](<#func-containerstdin-write>)
- [type ContainerStdout](<#type-containerstdout>)
  - [func (l ContainerStdout) Close() error](<#func-containerstdout-close>)
  - [func (l ContainerStdout) Read(p []byte) (n int, err error)](<#func-containerstdout-read>)
- [type Containers](<#type-containers>)
- [type Error](<#type-error>)
  - [func (e Error) Error() string](<#func-error-error>)
  - [func (e Error) GetMetricsFailureCategory() FailureCategory](<#func-error-getmetricsfailurecategory>)
  - [func (e Error) Unwrap() error](<#func-error-unwrap>)
- [type FailureCategory](<#type-failurecategory>)
  - [func ByExitCode(exitCode int) FailureCategory](<#func-byexitcode>)
- [type Graph](<#type-graph>)
  - [func NewGraph(services types.Services, initialStatus ServiceStatus) (*Graph, error)](<#func-newgraph>)
  - [func (g *Graph) AddEdge(source string, destination string) error](<#func-graph-addedge>)
  - [func (g *Graph) AddVertex(key string, service string, initialStatus ServiceStatus)](<#func-graph-addvertex>)
  - [func (g *Graph) FilterChildren(key string, status ServiceStatus) []*Vertex](<#func-graph-filterchildren>)
  - [func (g *Graph) FilterParents(key string, status ServiceStatus) []*Vertex](<#func-graph-filterparents>)
  - [func (g *Graph) HasCycles() (bool, error)](<#func-graph-hascycles>)
  - [func (g *Graph) Leaves() []*Vertex](<#func-graph-leaves>)
  - [func (g *Graph) Roots() []*Vertex](<#func-graph-roots>)
  - [func (g *Graph) UpdateStatus(key string, status ServiceStatus)](<#func-graph-updatestatus>)
- [type ImagePruneMode](<#type-imageprunemode>)
- [type ImagePruneOptions](<#type-imagepruneoptions>)
- [type ImagePruner](<#type-imagepruner>)
  - [func NewImagePruner(imageClient client.ImageAPIClient, project *types.Project) *ImagePruner](<#func-newimagepruner>)
  - [func (p *ImagePruner) ImagesToPrune(ctx context.Context, opts ImagePruneOptions) ([]string, error)](<#func-imagepruner-imagestoprune>)
- [type ServiceStatus](<#type-servicestatus>)
- [type Vertex](<#type-vertex>)
  - [func NewVertex(key string, service string, initialStatus ServiceStatus) *Vertex](<#func-newvertex>)
  - [func (v *Vertex) GetChildren() []*Vertex](<#func-vertex-getchildren>)
  - [func (v *Vertex) GetParents() []*Vertex](<#func-vertex-getparents>)


## Constants

```go
const (
    // ContainerCreated created status
    ContainerCreated = "created"
    // ContainerRestarting restarting status
    ContainerRestarting = "restarting"
    // ContainerRunning running status
    ContainerRunning = "running"
    // ContainerRemoving removing status
    ContainerRemoving = "removing"
    // ContainerPaused paused status
    ContainerPaused = "paused"
    // ContainerExited exited status
    ContainerExited = "exited"
    // ContainerDead dead status
    ContainerDead = "dead"
)
```

```go
const (
    // APISource is sent for API metrics
    APISource = "api"
    // SuccessStatus command success
    SuccessStatus = "success"
    // FailureStatus command failure
    FailureStatus = "failure"
    // ComposeParseFailureStatus failure while parsing compose file
    ComposeParseFailureStatus = "failure-compose-parse"
    // FileNotFoundFailureStatus failure getting compose file
    FileNotFoundFailureStatus = "failure-file-not-found"
    // CommandSyntaxFailureStatus failure reading command
    CommandSyntaxFailureStatus = "failure-cmd-syntax"
    // BuildFailureStatus failure building imge
    BuildFailureStatus = "failure-build"
    // PullFailureStatus failure pulling imge
    PullFailureStatus = "failure-pull"
    // CanceledStatus command canceled
    CanceledStatus = "canceled"
)
```

ServiceConditionRunningOrHealthy is a service condition on statys running or healthy

```go
const ServiceConditionRunningOrHealthy = "running_or_healthy"
```

## Variables

```go
var (
    // FileNotFoundFailure failure for compose file not found
    FileNotFoundFailure = FailureCategory{MetricsStatus: FileNotFoundFailureStatus, ExitCode: 14}
    // ComposeParseFailure failure for composefile parse error
    ComposeParseFailure = FailureCategory{MetricsStatus: ComposeParseFailureStatus, ExitCode: 15}
    // CommandSyntaxFailure failure for command line syntax
    CommandSyntaxFailure = FailureCategory{MetricsStatus: CommandSyntaxFailureStatus, ExitCode: 16}
    // BuildFailure failure while building images.
    BuildFailure = FailureCategory{MetricsStatus: BuildFailureStatus, ExitCode: 17}
    // PullFailure failure while pulling image
    PullFailure = FailureCategory{MetricsStatus: PullFailureStatus, ExitCode: 18}
)
```

## func InDependencyOrder

```go
func InDependencyOrder(ctx context.Context, project *types.Project, fn func(context.Context, string) error, options ...func(*graphTraversal)) error
```

InDependencyOrder applies the function to the services of the project taking in account the dependency order

## func InReverseDependencyOrder

```go
func InReverseDependencyOrder(ctx context.Context, project *types.Project, fn func(context.Context, string) error) error
```

InReverseDependencyOrder applies the function to the services of the project in reverse order of dependencies

## func NewComposeService

```go
func NewComposeService(dockerCli command.Cli) api.Service
```

NewComposeService create a local implementation of the compose.Service API

## func ServiceHash

```go
func ServiceHash(o types.ServiceConfig) (string, error)
```

ServiceHash computes the configuration hash for a service.

## func ToMobyEnv

```go
func ToMobyEnv(environment compose.MappingWithEquals) []string
```

ToMobyEnv convert into \[\]string

## func ToMobyHealthCheck

```go
func ToMobyHealthCheck(check *compose.HealthCheckConfig) *container.HealthConfig
```

ToMobyHealthCheck convert into container.HealthConfig

## func ToSeconds

```go
func ToSeconds(d *compose.Duration) *int
```

ToSeconds convert into seconds

## func WrapCategorisedComposeError

```go
func WrapCategorisedComposeError(err error, failure FailureCategory) error
```

WrapCategorisedComposeError wraps the error if not nil, otherwise returns nil

## func WrapComposeError

```go
func WrapComposeError(err error) error
```

WrapComposeError wraps the error if not nil, otherwise returns nil

## type ContainerStdin

ContainerStdin implement WriteCloser for moby.HijackedResponse

```go
type ContainerStdin struct {
    moby.HijackedResponse
}
```

### func \(ContainerStdin\) Close

```go
func (c ContainerStdin) Close() error
```

Close implement io.WriteCloser

### func \(ContainerStdin\) Write

```go
func (c ContainerStdin) Write(p []byte) (n int, err error)
```

Write implement io.WriteCloser

## type ContainerStdout

ContainerStdout implement ReadCloser for moby.HijackedResponse

```go
type ContainerStdout struct {
    moby.HijackedResponse
}
```

### func \(ContainerStdout\) Close

```go
func (l ContainerStdout) Close() error
```

Close implement io.ReadCloser

### func \(ContainerStdout\) Read

```go
func (l ContainerStdout) Read(p []byte) (n int, err error)
```

Read implement io.ReadCloser

## type Containers

Containers is a set of moby Container

```go
type Containers []moby.Container
```

## type Error

Error error to categorize failures and extract metrics info

```go
type Error struct {
    Err      error
    Category *FailureCategory
}
```

### func \(Error\) Error

```go
func (e Error) Error() string
```

### func \(Error\) GetMetricsFailureCategory

```go
func (e Error) GetMetricsFailureCategory() FailureCategory
```

GetMetricsFailureCategory get metrics status and error code corresponding to this error

### func \(Error\) Unwrap

```go
func (e Error) Unwrap() error
```

Unwrap get underlying error

## type FailureCategory

FailureCategory sruct regrouping metrics failure status and specific exit code

```go
type FailureCategory struct {
    MetricsStatus string
    ExitCode      int
}
```

### func ByExitCode

```go
func ByExitCode(exitCode int) FailureCategory
```

ByExitCode retrieve FailureCategory based on command exit code

## type Graph

Graph represents project as service dependencies

```go
type Graph struct {
    Vertices map[string]*Vertex
    // contains filtered or unexported fields
}
```

### func NewGraph

```go
func NewGraph(services types.Services, initialStatus ServiceStatus) (*Graph, error)
```

NewGraph returns the dependency graph of the services

### func \(\*Graph\) AddEdge

```go
func (g *Graph) AddEdge(source string, destination string) error
```

AddEdge adds a relationship of dependency between vertices \`source\` and \`destination\`

### func \(\*Graph\) AddVertex

```go
func (g *Graph) AddVertex(key string, service string, initialStatus ServiceStatus)
```

AddVertex adds a vertex to the Graph

### func \(\*Graph\) FilterChildren

```go
func (g *Graph) FilterChildren(key string, status ServiceStatus) []*Vertex
```

FilterChildren returns children of a certain vertex that are in a certain status

### func \(\*Graph\) FilterParents

```go
func (g *Graph) FilterParents(key string, status ServiceStatus) []*Vertex
```

FilterParents returns the parents of a certain vertex that are in a certain status

### func \(\*Graph\) HasCycles

```go
func (g *Graph) HasCycles() (bool, error)
```

HasCycles detects cycles in the graph

### func \(\*Graph\) Leaves

```go
func (g *Graph) Leaves() []*Vertex
```

Leaves returns the slice of leaves of the graph

### func \(\*Graph\) Roots

```go
func (g *Graph) Roots() []*Vertex
```

Roots returns the slice of "Roots" of the graph

### func \(\*Graph\) UpdateStatus

```go
func (g *Graph) UpdateStatus(key string, status ServiceStatus)
```

UpdateStatus updates the status of a certain vertex

## type ImagePruneMode

ImagePruneMode controls how aggressively images associated with the project are removed from the engine.

```go
type ImagePruneMode string
```

```go
const (
    // ImagePruneNone indicates that no project images should be removed.
    ImagePruneNone ImagePruneMode = ""
    // ImagePruneLocal indicates that only images built locally by Compose
    // should be removed.
    ImagePruneLocal ImagePruneMode = "local"
    // ImagePruneAll indicates that all project-associated images, including
    // remote images should be removed.
    ImagePruneAll ImagePruneMode = "all"
)
```

## type ImagePruneOptions

ImagePruneOptions controls the behavior of image pruning.

```go
type ImagePruneOptions struct {
    Mode ImagePruneMode

    // RemoveOrphans will result in the removal of images that were built for
    // the project regardless of whether they are for a known service if true.
    RemoveOrphans bool
}
```

## type ImagePruner

ImagePruner handles image removal during Compose \`down\` operations.

```go
type ImagePruner struct {
    // contains filtered or unexported fields
}
```

### func NewImagePruner

```go
func NewImagePruner(imageClient client.ImageAPIClient, project *types.Project) *ImagePruner
```

NewImagePruner creates an ImagePruner object for a project.

### func \(\*ImagePruner\) ImagesToPrune

```go
func (p *ImagePruner) ImagesToPrune(ctx context.Context, opts ImagePruneOptions) ([]string, error)
```

ImagesToPrune returns the set of images that should be removed.

## type ServiceStatus

ServiceStatus indicates the status of a service

```go
type ServiceStatus int
```

Services status flags

```go
const (
    ServiceStopped ServiceStatus = iota
    ServiceStarted
)
```

## type Vertex

Vertex represents a service in the dependencies structure

```go
type Vertex struct {
    Key      string
    Service  string
    Status   ServiceStatus
    Children map[string]*Vertex
    Parents  map[string]*Vertex
}
```

### func NewVertex

```go
func NewVertex(key string, service string, initialStatus ServiceStatus) *Vertex
```

NewVertex is the constructor function for the Vertex

### func \(\*Vertex\) GetChildren

```go
func (v *Vertex) GetChildren() []*Vertex
```

GetChildren returns a slice with the child vertices of the a Vertex

### func \(\*Vertex\) GetParents

```go
func (v *Vertex) GetParents() []*Vertex
```

GetParents returns a slice with the parent vertices of the a Vertex



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

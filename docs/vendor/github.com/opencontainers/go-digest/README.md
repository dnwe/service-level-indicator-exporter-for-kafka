<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# digest

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/opencontainers/go-digest"
```

Package digest provides a generalized type to opaquely represent message digests and their operations within the registry. The Digest type is designed to serve as a flexible identifier in a content\-addressable system. More importantly, it provides tools and wrappers to work with hash.Hash\-based digests with little effort.

### Basics

The format of a digest is simply a string with two parts, dubbed the "algorithm" and the "digest", separated by a colon:

```
<algorithm>:<digest>
```

An example of a sha256 digest representation follows:

```
sha256:7173b809ca12ec5dee4506cd86be934c4596dd234ee82c0662eac04a8c2c71dc
```

The "algorithm" portion defines both the hashing algorithm used to calculate the digest and the encoding of the resulting digest, which defaults to "hex" if not otherwise specified. Currently, all supported algorithms have their digests encoded in hex strings.

In the example above, the string "sha256" is the algorithm and the hex bytes are the "digest".

Because the Digest type is simply a string, once a valid Digest is obtained, comparisons are cheap, quick and simple to express with the standard equality operator.

### Verification

The main benefit of using the Digest type is simple verification against a given digest. The Verifier interface, modeled after the stdlib hash.Hash interface, provides a common write sink for digest verification. After writing is complete, calling the Verifier.Verified method will indicate whether or not the stream of bytes matches the target digest.

### Missing Features

In addition to the above, we intend to add the following features to this package:

1. A Digester type that supports write sink digest calculation.

2. Suspend and resume of ongoing digest calculations to support efficient digest verification in the registry.

## Index

- [Variables](<#variables>)
- [type Algorithm](<#type-algorithm>)
  - [func (a Algorithm) Available() bool](<#func-algorithm-available>)
  - [func (a Algorithm) Digester() Digester](<#func-algorithm-digester>)
  - [func (a Algorithm) Encode(d []byte) string](<#func-algorithm-encode>)
  - [func (a Algorithm) FromBytes(p []byte) Digest](<#func-algorithm-frombytes>)
  - [func (a Algorithm) FromReader(rd io.Reader) (Digest, error)](<#func-algorithm-fromreader>)
  - [func (a Algorithm) FromString(s string) Digest](<#func-algorithm-fromstring>)
  - [func (a Algorithm) Hash() hash.Hash](<#func-algorithm-hash>)
  - [func (a *Algorithm) Set(value string) error](<#func-algorithm-set>)
  - [func (a Algorithm) Size() int](<#func-algorithm-size>)
  - [func (a Algorithm) String() string](<#func-algorithm-string>)
  - [func (a Algorithm) Validate(encoded string) error](<#func-algorithm-validate>)
- [type Digest](<#type-digest>)
  - [func FromBytes(p []byte) Digest](<#func-frombytes>)
  - [func FromReader(rd io.Reader) (Digest, error)](<#func-fromreader>)
  - [func FromString(s string) Digest](<#func-fromstring>)
  - [func NewDigest(alg Algorithm, h hash.Hash) Digest](<#func-newdigest>)
  - [func NewDigestFromBytes(alg Algorithm, p []byte) Digest](<#func-newdigestfrombytes>)
  - [func NewDigestFromEncoded(alg Algorithm, encoded string) Digest](<#func-newdigestfromencoded>)
  - [func NewDigestFromHex(alg, hex string) Digest](<#func-newdigestfromhex>)
  - [func Parse(s string) (Digest, error)](<#func-parse>)
  - [func (d Digest) Algorithm() Algorithm](<#func-digest-algorithm>)
  - [func (d Digest) Encoded() string](<#func-digest-encoded>)
  - [func (d Digest) Hex() string](<#func-digest-hex>)
  - [func (d Digest) String() string](<#func-digest-string>)
  - [func (d Digest) Validate() error](<#func-digest-validate>)
  - [func (d Digest) Verifier() Verifier](<#func-digest-verifier>)
- [type Digester](<#type-digester>)
- [type Verifier](<#type-verifier>)


## Variables

```go
var (
    // ErrDigestInvalidFormat returned when digest format invalid.
    ErrDigestInvalidFormat = fmt.Errorf("invalid checksum digest format")

    // ErrDigestInvalidLength returned when digest has invalid length.
    ErrDigestInvalidLength = fmt.Errorf("invalid checksum digest length")

    // ErrDigestUnsupported returned when the digest algorithm is unsupported.
    ErrDigestUnsupported = fmt.Errorf("unsupported digest algorithm")
)
```

DigestRegexp matches valid digest types.

```go
var DigestRegexp = regexp.MustCompile(`[a-z0-9]+(?:[.+_-][a-z0-9]+)*:[a-zA-Z0-9=_-]+`)
```

DigestRegexpAnchored matches valid digest types, anchored to the start and end of the match.

```go
var DigestRegexpAnchored = regexp.MustCompile(`^` + DigestRegexp.String() + `$`)
```

## type Algorithm

Algorithm identifies and implementation of a digester by an identifier. Note the that this defines both the hash algorithm used and the string encoding.

```go
type Algorithm string
```

supported digest types

```go
const (
    SHA256 Algorithm = "sha256" // sha256 with hex encoding (lower case only)
    SHA384 Algorithm = "sha384" // sha384 with hex encoding (lower case only)
    SHA512 Algorithm = "sha512" // sha512 with hex encoding (lower case only)

    // Canonical is the primary digest algorithm used with the distribution
    // project. Other digests may be used but this one is the primary storage
    // digest.
    Canonical = SHA256
)
```

### func \(Algorithm\) Available

```go
func (a Algorithm) Available() bool
```

Available returns true if the digest type is available for use. If this returns false, Digester and Hash will return nil.

### func \(Algorithm\) Digester

```go
func (a Algorithm) Digester() Digester
```

Digester returns a new digester for the specified algorithm. If the algorithm does not have a digester implementation, nil will be returned. This can be checked by calling Available before calling Digester.

### func \(Algorithm\) Encode

```go
func (a Algorithm) Encode(d []byte) string
```

Encode encodes the raw bytes of a digest, typically from a hash.Hash, into the encoded portion of the digest.

### func \(Algorithm\) FromBytes

```go
func (a Algorithm) FromBytes(p []byte) Digest
```

FromBytes digests the input and returns a Digest.

### func \(Algorithm\) FromReader

```go
func (a Algorithm) FromReader(rd io.Reader) (Digest, error)
```

FromReader returns the digest of the reader using the algorithm.

### func \(Algorithm\) FromString

```go
func (a Algorithm) FromString(s string) Digest
```

FromString digests the string input and returns a Digest.

### func \(Algorithm\) Hash

```go
func (a Algorithm) Hash() hash.Hash
```

Hash returns a new hash as used by the algorithm. If not available, the method will panic. Check Algorithm.Available\(\) before calling.

### func \(\*Algorithm\) Set

```go
func (a *Algorithm) Set(value string) error
```

Set implemented to allow use of Algorithm as a command line flag.

### func \(Algorithm\) Size

```go
func (a Algorithm) Size() int
```

Size returns number of bytes returned by the hash.

### func \(Algorithm\) String

```go
func (a Algorithm) String() string
```

### func \(Algorithm\) Validate

```go
func (a Algorithm) Validate(encoded string) error
```

Validate validates the encoded portion string

## type Digest

Digest allows simple protection of hex formatted digest strings, prefixed by their algorithm. Strings of type Digest have some guarantee of being in the correct format and it provides quick access to the components of a digest string.

The following is an example of the contents of Digest types:

```
sha256:7173b809ca12ec5dee4506cd86be934c4596dd234ee82c0662eac04a8c2c71dc
```

This allows to abstract the digest behind this type and work only in those terms.

```go
type Digest string
```

### func FromBytes

```go
func FromBytes(p []byte) Digest
```

FromBytes digests the input and returns a Digest.

### func FromReader

```go
func FromReader(rd io.Reader) (Digest, error)
```

FromReader consumes the content of rd until io.EOF, returning canonical digest.

### func FromString

```go
func FromString(s string) Digest
```

FromString digests the input and returns a Digest.

### func NewDigest

```go
func NewDigest(alg Algorithm, h hash.Hash) Digest
```

NewDigest returns a Digest from alg and a hash.Hash object.

### func NewDigestFromBytes

```go
func NewDigestFromBytes(alg Algorithm, p []byte) Digest
```

NewDigestFromBytes returns a new digest from the byte contents of p. Typically, this can come from hash.Hash.Sum\(...\) or xxx.SumXXX\(...\) functions. This is also useful for rebuilding digests from binary serializations.

### func NewDigestFromEncoded

```go
func NewDigestFromEncoded(alg Algorithm, encoded string) Digest
```

NewDigestFromEncoded returns a Digest from alg and the encoded digest.

### func NewDigestFromHex

```go
func NewDigestFromHex(alg, hex string) Digest
```

NewDigestFromHex is deprecated. Please use NewDigestFromEncoded.

### func Parse

```go
func Parse(s string) (Digest, error)
```

Parse parses s and returns the validated digest object. An error will be returned if the format is invalid.

### func \(Digest\) Algorithm

```go
func (d Digest) Algorithm() Algorithm
```

Algorithm returns the algorithm portion of the digest. This will panic if the underlying digest is not in a valid format.

### func \(Digest\) Encoded

```go
func (d Digest) Encoded() string
```

Encoded returns the encoded portion of the digest. This will panic if the underlying digest is not in a valid format.

### func \(Digest\) Hex

```go
func (d Digest) Hex() string
```

Hex is deprecated. Please use Digest.Encoded.

### func \(Digest\) String

```go
func (d Digest) String() string
```

### func \(Digest\) Validate

```go
func (d Digest) Validate() error
```

Validate checks that the contents of d is a valid digest, returning an error if not.

### func \(Digest\) Verifier

```go
func (d Digest) Verifier() Verifier
```

Verifier returns a writer object that can be used to verify a stream of content against the digest. If the digest is invalid, the method will panic.

## type Digester

Digester calculates the digest of written data. Writes should go directly to the return value of Hash, while calling Digest will return the current value of the digest.

```go
type Digester interface {
    Hash() hash.Hash // provides direct access to underlying hash instance.
    Digest() Digest
}
```

## type Verifier

Verifier presents a general verification interface to be used with message digests and other byte stream verifications. Users instantiate a Verifier from one of the various methods, write the data under test to it then check the result with the Verified method.

```go
type Verifier interface {
    io.Writer

    // Verified will return true if the content written to Verifier matches
    // the digest.
    Verified() bool
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# lz4

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/pierrec/lz4/v4"
```

Package lz4 implements reading and writing lz4 compressed data.

The package supports both the LZ4 stream format, as specified in http://fastcompression.blogspot.fr/2013/04/lz4-streaming-format-final.html, and the LZ4 block format, defined at http://fastcompression.blogspot.fr/2011/05/lz4-explained.html.

See https://github.com/lz4/lz4 for the reference C implementation.

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func CompressBlock(src, dst []byte, _ []int) (int, error)](<#func-compressblock>)
- [func CompressBlockBound(n int) int](<#func-compressblockbound>)
- [func CompressBlockHC(src, dst []byte, depth CompressionLevel, _, _ []int) (int, error)](<#func-compressblockhc>)
- [func UncompressBlock(src, dst []byte) (int, error)](<#func-uncompressblock>)
- [func UncompressBlockWithDict(src, dst, dict []byte) (int, error)](<#func-uncompressblockwithdict>)
- [func ValidFrameHeader(in []byte) (bool, error)](<#func-validframeheader>)
- [type BlockSize](<#type-blocksize>)
  - [func (i BlockSize) String() string](<#func-blocksize-string>)
- [type CompressionLevel](<#type-compressionlevel>)
  - [func (i CompressionLevel) String() string](<#func-compressionlevel-string>)
- [type Compressor](<#type-compressor>)
  - [func (c *Compressor) CompressBlock(src, dst []byte) (int, error)](<#func-compressor-compressblock>)
- [type CompressorHC](<#type-compressorhc>)
  - [func (c *CompressorHC) CompressBlock(src, dst []byte) (int, error)](<#func-compressorhc-compressblock>)
- [type Option](<#type-option>)
  - [func BlockChecksumOption(flag bool) Option](<#func-blockchecksumoption>)
  - [func BlockSizeOption(size BlockSize) Option](<#func-blocksizeoption>)
  - [func ChecksumOption(flag bool) Option](<#func-checksumoption>)
  - [func CompressionLevelOption(level CompressionLevel) Option](<#func-compressionleveloption>)
  - [func ConcurrencyOption(n int) Option](<#func-concurrencyoption>)
  - [func LegacyOption(legacy bool) Option](<#func-legacyoption>)
  - [func OnBlockDoneOption(handler func(size int)) Option](<#func-onblockdoneoption>)
  - [func SizeOption(size uint64) Option](<#func-sizeoption>)
  - [func (o Option) String() string](<#func-option-string>)
- [type Reader](<#type-reader>)
  - [func NewReader(r io.Reader) *Reader](<#func-newreader>)
  - [func (r *Reader) Apply(options ...Option) (err error)](<#func-reader-apply>)
  - [func (r *Reader) Read(buf []byte) (n int, err error)](<#func-reader-read>)
  - [func (r *Reader) Reset(reader io.Reader)](<#func-reader-reset>)
  - [func (r *Reader) Size() int](<#func-reader-size>)
  - [func (r *Reader) WriteTo(w io.Writer) (n int64, err error)](<#func-reader-writeto>)
- [type Writer](<#type-writer>)
  - [func NewWriter(w io.Writer) *Writer](<#func-newwriter>)
  - [func (w *Writer) Apply(options ...Option) (err error)](<#func-writer-apply>)
  - [func (w *Writer) Close() error](<#func-writer-close>)
  - [func (w *Writer) Flush() (err error)](<#func-writer-flush>)
  - [func (w *Writer) ReadFrom(r io.Reader) (n int64, err error)](<#func-writer-readfrom>)
  - [func (w *Writer) Reset(writer io.Writer)](<#func-writer-reset>)
  - [func (w *Writer) Write(buf []byte) (n int, err error)](<#func-writer-write>)


## Constants

```go
const (
    // ErrInvalidSourceShortBuffer is returned by UncompressBlock or CompressBLock when a compressed
    // block is corrupted or the destination buffer is not large enough for the uncompressed data.
    ErrInvalidSourceShortBuffer = lz4errors.ErrInvalidSourceShortBuffer
    // ErrInvalidFrame is returned when reading an invalid LZ4 archive.
    ErrInvalidFrame = lz4errors.ErrInvalidFrame
    // ErrInternalUnhandledState is an internal error.
    ErrInternalUnhandledState = lz4errors.ErrInternalUnhandledState
    // ErrInvalidHeaderChecksum is returned when reading a frame.
    ErrInvalidHeaderChecksum = lz4errors.ErrInvalidHeaderChecksum
    // ErrInvalidBlockChecksum is returned when reading a frame.
    ErrInvalidBlockChecksum = lz4errors.ErrInvalidBlockChecksum
    // ErrInvalidFrameChecksum is returned when reading a frame.
    ErrInvalidFrameChecksum = lz4errors.ErrInvalidFrameChecksum
    // ErrOptionInvalidCompressionLevel is returned when the supplied compression level is invalid.
    ErrOptionInvalidCompressionLevel = lz4errors.ErrOptionInvalidCompressionLevel
    // ErrOptionClosedOrError is returned when an option is applied to a closed or in error object.
    ErrOptionClosedOrError = lz4errors.ErrOptionClosedOrError
    // ErrOptionInvalidBlockSize is returned when
    ErrOptionInvalidBlockSize = lz4errors.ErrOptionInvalidBlockSize
    // ErrOptionNotApplicable is returned when trying to apply an option to an object not supporting it.
    ErrOptionNotApplicable = lz4errors.ErrOptionNotApplicable
    // ErrWriterNotClosed is returned when attempting to reset an unclosed writer.
    ErrWriterNotClosed = lz4errors.ErrWriterNotClosed
)
```

## Variables

Default options.

```go
var (
    DefaultBlockSizeOption = BlockSizeOption(Block4Mb)
    DefaultChecksumOption  = ChecksumOption(true)
    DefaultConcurrency     = ConcurrencyOption(1)
)
```

## func CompressBlock

```go
func CompressBlock(src, dst []byte, _ []int) (int, error)
```

CompressBlock is equivalent to Compressor.CompressBlock. The final argument is ignored and should be set to nil.

This function is deprecated. Use a Compressor instead.

## func CompressBlockBound

```go
func CompressBlockBound(n int) int
```

CompressBlockBound returns the maximum size of a given buffer of size n, when not compressible.

## func CompressBlockHC

```go
func CompressBlockHC(src, dst []byte, depth CompressionLevel, _, _ []int) (int, error)
```

CompressBlockHC is equivalent to CompressorHC.CompressBlock. The final two arguments are ignored and should be set to nil.

This function is deprecated. Use a CompressorHC instead.

## func UncompressBlock

```go
func UncompressBlock(src, dst []byte) (int, error)
```

UncompressBlock uncompresses the source buffer into the destination one, and returns the uncompressed size.

The destination buffer must be sized appropriately.

An error is returned if the source data is invalid or the destination buffer is too small.

## func UncompressBlockWithDict

```go
func UncompressBlockWithDict(src, dst, dict []byte) (int, error)
```

UncompressBlockWithDict uncompresses the source buffer into the destination one using a dictionary, and returns the uncompressed size.

The destination buffer must be sized appropriately.

An error is returned if the source data is invalid or the destination buffer is too small.

## func ValidFrameHeader

```go
func ValidFrameHeader(in []byte) (bool, error)
```

ValidFrameHeader returns a bool indicating if the given bytes slice matches a LZ4 header.

## type BlockSize

BlockSizeIndex defines the size of the blocks to be compressed.

```go
type BlockSize uint32
```

```go
const (
    Block64Kb BlockSize = 1 << (16 + iota*2)
    Block256Kb
    Block1Mb
    Block4Mb
)
```

### func \(BlockSize\) String

```go
func (i BlockSize) String() string
```

## type CompressionLevel

CompressionLevel defines the level of compression to use. The higher the better, but slower, compression.

```go
type CompressionLevel uint32
```

```go
const (
    Fast   CompressionLevel = 0
    Level1 CompressionLevel = 1 << (8 + iota)
    Level2
    Level3
    Level4
    Level5
    Level6
    Level7
    Level8
    Level9
)
```

### func \(CompressionLevel\) String

```go
func (i CompressionLevel) String() string
```

## type Compressor

A Compressor compresses data into the LZ4 block format. It uses a fast compression algorithm.

A Compressor is not safe for concurrent use by multiple goroutines.

Use a Writer to compress into the LZ4 stream format.

```go
type Compressor struct {
    // contains filtered or unexported fields
}
```

### func \(\*Compressor\) CompressBlock

```go
func (c *Compressor) CompressBlock(src, dst []byte) (int, error)
```

CompressBlock compresses the source buffer src into the destination dst.

If compression is successful, the first return value is the size of the compressed data, which is always \>0.

If dst has length at least CompressBlockBound\(len\(src\)\), compression always succeeds. Otherwise, the first return value is zero. The error return is non\-nil if the compressed data does not fit in dst, but it might fit in a larger buffer that is still smaller than CompressBlockBound\(len\(src\)\). The return value \(0, nil\) means the data is likely incompressible and a buffer of length CompressBlockBound\(len\(src\)\) should be passed in.

## type CompressorHC

A CompressorHC compresses data into the LZ4 block format. Its compression ratio is potentially better than that of a Compressor, but it is also slower and requires more memory.

A Compressor is not safe for concurrent use by multiple goroutines.

Use a Writer to compress into the LZ4 stream format.

```go
type CompressorHC struct {
    // Level is the maximum search depth for compression.
    // Values <= 0 mean no maximum.
    Level CompressionLevel
    // contains filtered or unexported fields
}
```

### func \(\*CompressorHC\) CompressBlock

```go
func (c *CompressorHC) CompressBlock(src, dst []byte) (int, error)
```

CompressBlock compresses the source buffer src into the destination dst.

If compression is successful, the first return value is the size of the compressed data, which is always \>0.

If dst has length at least CompressBlockBound\(len\(src\)\), compression always succeeds. Otherwise, the first return value is zero. The error return is non\-nil if the compressed data does not fit in dst, but it might fit in a larger buffer that is still smaller than CompressBlockBound\(len\(src\)\). The return value \(0, nil\) means the data is likely incompressible and a buffer of length CompressBlockBound\(len\(src\)\) should be passed in.

## type Option

Option defines the parameters to setup an LZ4 Writer or Reader.

```go
type Option func(applier) error
```

### func BlockChecksumOption

```go
func BlockChecksumOption(flag bool) Option
```

BlockChecksumOption enables or disables block checksum \(default=false\).

### func BlockSizeOption

```go
func BlockSizeOption(size BlockSize) Option
```

BlockSizeOption defines the maximum size of compressed blocks \(default=Block4Mb\).

### func ChecksumOption

```go
func ChecksumOption(flag bool) Option
```

ChecksumOption enables/disables all blocks or content checksum \(default=true\).

### func CompressionLevelOption

```go
func CompressionLevelOption(level CompressionLevel) Option
```

CompressionLevelOption defines the compression level \(default=Fast\).

### func ConcurrencyOption

```go
func ConcurrencyOption(n int) Option
```

ConcurrencyOption sets the number of go routines used for compression. If n \<= 0, then the output of runtime.GOMAXPROCS\(0\) is used.

### func LegacyOption

```go
func LegacyOption(legacy bool) Option
```

LegacyOption provides support for writing LZ4 frames in the legacy format.

See https://github.com/lz4/lz4/blob/dev/doc/lz4_Frame_format.md#legacy-frame.

NB. compressed Linux kernel images use a tweaked LZ4 legacy format where the compressed stream is followed by the original \(uncompressed\) size of the kernel \(https://events.static.linuxfound.org/sites/events/files/lcjpcojp13_klee.pdf\). This is also supported as a special case.

### func OnBlockDoneOption

```go
func OnBlockDoneOption(handler func(size int)) Option
```

OnBlockDoneOption is triggered when a block has been processed. For a Writer, it is when is has been compressed, for a Reader, it is when it has been uncompressed.

### func SizeOption

```go
func SizeOption(size uint64) Option
```

SizeOption sets the size of the original uncompressed data \(default=0\). It is useful to know the size of the whole uncompressed data stream.

### func \(Option\) String

```go
func (o Option) String() string
```

String returns a string representation of the option with its parameter\(s\).

## type Reader

Reader allows reading an LZ4 stream.

```go
type Reader struct {
    // contains filtered or unexported fields
}
```

### func NewReader

```go
func NewReader(r io.Reader) *Reader
```

NewReader returns a new LZ4 frame decoder.

### func \(\*Reader\) Apply

```go
func (r *Reader) Apply(options ...Option) (err error)
```

### func \(\*Reader\) Read

```go
func (r *Reader) Read(buf []byte) (n int, err error)
```

### func \(\*Reader\) Reset

```go
func (r *Reader) Reset(reader io.Reader)
```

Reset clears the state of the Reader r such that it is equivalent to its initial state from NewReader, but instead reading from reader. No access to reader is performed.

### func \(\*Reader\) Size

```go
func (r *Reader) Size() int
```

Size returns the size of the underlying uncompressed data, if set in the stream.

### func \(\*Reader\) WriteTo

```go
func (r *Reader) WriteTo(w io.Writer) (n int64, err error)
```

WriteTo efficiently uncompresses the data from the Reader underlying source to w.

## type Writer

Writer allows writing an LZ4 stream.

```go
type Writer struct {
    // contains filtered or unexported fields
}
```

### func NewWriter

```go
func NewWriter(w io.Writer) *Writer
```

NewWriter returns a new LZ4 frame encoder.

### func \(\*Writer\) Apply

```go
func (w *Writer) Apply(options ...Option) (err error)
```

### func \(\*Writer\) Close

```go
func (w *Writer) Close() error
```

Close closes the Writer, flushing any unwritten data to the underlying writer without closing it.

### func \(\*Writer\) Flush

```go
func (w *Writer) Flush() (err error)
```

Flush any buffered data to the underlying writer immediately.

### func \(\*Writer\) ReadFrom

```go
func (w *Writer) ReadFrom(r io.Reader) (n int64, err error)
```

ReadFrom efficiently reads from r and compressed into the Writer destination.

### func \(\*Writer\) Reset

```go
func (w *Writer) Reset(writer io.Writer)
```

Reset clears the state of the Writer w such that it is equivalent to its initial state from NewWriter, but instead writing to writer. Reset keeps the previous options unless overwritten by the supplied ones. No access to writer is performed.

w.Close must be called before Reset or pending data may be dropped.

### func \(\*Writer\) Write

```go
func (w *Writer) Write(buf []byte) (n int, err error)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

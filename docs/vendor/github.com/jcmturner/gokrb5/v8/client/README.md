<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# client

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/jcmturner/gokrb5/v8/client"
```

Package client provides a client library and methods for Kerberos 5 authentication.

## Index

- [Constants](<#constants>)
- [func AssumePreAuthentication(b bool) func(*Settings)](<#func-assumepreauthentication>)
- [func DisablePAFXFAST(b bool) func(*Settings)](<#func-disablepafxfast>)
- [func Logger(l *log.Logger) func(*Settings)](<#func-logger>)
- [type Cache](<#type-cache>)
  - [func NewCache() *Cache](<#func-newcache>)
  - [func (c *Cache) JSON() (string, error)](<#func-cache-json>)
  - [func (c *Cache) RemoveEntry(spn string)](<#func-cache-removeentry>)
- [type CacheEntry](<#type-cacheentry>)
- [type Client](<#type-client>)
  - [func NewFromCCache(c *credentials.CCache, krb5conf *config.Config, settings ...func(*Settings)) (*Client, error)](<#func-newfromccache>)
  - [func NewWithKeytab(username, realm string, kt *keytab.Keytab, krb5conf *config.Config, settings ...func(*Settings)) *Client](<#func-newwithkeytab>)
  - [func NewWithPassword(username, realm, password string, krb5conf *config.Config, settings ...func(*Settings)) *Client](<#func-newwithpassword>)
  - [func (cl *Client) ASExchange(realm string, ASReq messages.ASReq, referral int) (messages.ASRep, error)](<#func-client-asexchange>)
  - [func (cl *Client) AffirmLogin() error](<#func-client-affirmlogin>)
  - [func (cl *Client) ChangePasswd(newPasswd string) (bool, error)](<#func-client-changepasswd>)
  - [func (cl *Client) Destroy()](<#func-client-destroy>)
  - [func (cl *Client) Diagnostics(w io.Writer) error](<#func-client-diagnostics>)
  - [func (cl *Client) GetCachedTicket(spn string) (messages.Ticket, types.EncryptionKey, bool)](<#func-client-getcachedticket>)
  - [func (cl *Client) GetServiceTicket(spn string) (messages.Ticket, types.EncryptionKey, error)](<#func-client-getserviceticket>)
  - [func (cl *Client) IsConfigured() (bool, error)](<#func-client-isconfigured>)
  - [func (cl *Client) Key(etype etype.EType, kvno int, krberr *messages.KRBError) (types.EncryptionKey, int, error)](<#func-client-key>)
  - [func (cl *Client) Log(format string, v ...interface{})](<#func-client-log>)
  - [func (cl *Client) Login() error](<#func-client-login>)
  - [func (cl *Client) Print(w io.Writer)](<#func-client-print>)
  - [func (cl *Client) TGSExchange(tgsReq messages.TGSReq, kdcRealm string, tgt messages.Ticket, sessionKey types.EncryptionKey, referral int) (messages.TGSReq, messages.TGSRep, error)](<#func-client-tgsexchange>)
  - [func (cl *Client) TGSREQGenerateAndExchange(spn types.PrincipalName, kdcRealm string, tgt messages.Ticket, sessionKey types.EncryptionKey, renewal bool) (tgsReq messages.TGSReq, tgsRep messages.TGSRep, err error)](<#func-client-tgsreqgenerateandexchange>)
- [type Settings](<#type-settings>)
  - [func NewSettings(settings ...func(*Settings)) *Settings](<#func-newsettings>)
  - [func (s *Settings) AssumePreAuthentication() bool](<#func-settings-assumepreauthentication>)
  - [func (s *Settings) DisablePAFXFAST() bool](<#func-settings-disablepafxfast>)
  - [func (s *Settings) JSON() (string, error)](<#func-settings-json>)
  - [func (s *Settings) Logger() *log.Logger](<#func-settings-logger>)


## Constants

Kpasswd server response codes.

```go
const (
    KRB5_KPASSWD_SUCCESS             = 0
    KRB5_KPASSWD_MALFORMED           = 1
    KRB5_KPASSWD_HARDERROR           = 2
    KRB5_KPASSWD_AUTHERROR           = 3
    KRB5_KPASSWD_SOFTERROR           = 4
    KRB5_KPASSWD_ACCESSDENIED        = 5
    KRB5_KPASSWD_BAD_VERSION         = 6
    KRB5_KPASSWD_INITIAL_FLAG_NEEDED = 7
)
```

## func AssumePreAuthentication

```go
func AssumePreAuthentication(b bool) func(*Settings)
```

AssumePreAuthentication used to configure the client to assume pre\-authentication is required.

s := NewSettings\(AssumePreAuthentication\(true\)\)

## func DisablePAFXFAST

```go
func DisablePAFXFAST(b bool) func(*Settings)
```

DisablePAFXFAST used to configure the client to not use PA\_FX\_FAST.

s := NewSettings\(DisablePAFXFAST\(true\)\)

## func Logger

```go
func Logger(l *log.Logger) func(*Settings)
```

Logger used to configure client with a logger.

s := NewSettings\(kt, Logger\(l\)\)

## type Cache

Cache for service tickets held by the client.

```go
type Cache struct {
    Entries map[string]CacheEntry
    // contains filtered or unexported fields
}
```

### func NewCache

```go
func NewCache() *Cache
```

NewCache creates a new client ticket cache instance.

### func \(\*Cache\) JSON

```go
func (c *Cache) JSON() (string, error)
```

JSON returns information about the cached service tickets in a JSON format.

### func \(\*Cache\) RemoveEntry

```go
func (c *Cache) RemoveEntry(spn string)
```

RemoveEntry removes the cache entry for the defined SPN.

## type CacheEntry

CacheEntry holds details for a cache entry.

```go
type CacheEntry struct {
    SPN        string
    Ticket     messages.Ticket `json:"-"`
    AuthTime   time.Time
    StartTime  time.Time
    EndTime    time.Time
    RenewTill  time.Time
    SessionKey types.EncryptionKey `json:"-"`
}
```

## type Client

Client side configuration and state.

```go
type Client struct {
    Credentials *credentials.Credentials
    Config      *config.Config
    // contains filtered or unexported fields
}
```

### func NewFromCCache

```go
func NewFromCCache(c *credentials.CCache, krb5conf *config.Config, settings ...func(*Settings)) (*Client, error)
```

NewFromCCache create a client from a populated client cache.

WARNING: A client created from CCache does not automatically renew TGTs and a failure will occur after the TGT expires.

### func NewWithKeytab

```go
func NewWithKeytab(username, realm string, kt *keytab.Keytab, krb5conf *config.Config, settings ...func(*Settings)) *Client
```

NewWithKeytab creates a new client from a keytab credential.

### func NewWithPassword

```go
func NewWithPassword(username, realm, password string, krb5conf *config.Config, settings ...func(*Settings)) *Client
```

NewWithPassword creates a new client from a password credential. Set the realm to empty string to use the default realm from config.

### func \(\*Client\) ASExchange

```go
func (cl *Client) ASExchange(realm string, ASReq messages.ASReq, referral int) (messages.ASRep, error)
```

ASExchange performs an AS exchange for the client to retrieve a TGT.

### func \(\*Client\) AffirmLogin

```go
func (cl *Client) AffirmLogin() error
```

AffirmLogin will only perform an AS exchange with the KDC if the client does not already have a TGT.

### func \(\*Client\) ChangePasswd

```go
func (cl *Client) ChangePasswd(newPasswd string) (bool, error)
```

ChangePasswd changes the password of the client to the value provided.

### func \(\*Client\) Destroy

```go
func (cl *Client) Destroy()
```

Destroy stops the auto\-renewal of all sessions and removes the sessions and cache entries from the client.

### func \(\*Client\) Diagnostics

```go
func (cl *Client) Diagnostics(w io.Writer) error
```

Diagnostics runs a set of checks that the client is properly configured and writes details to the io.Writer provided.

### func \(\*Client\) GetCachedTicket

```go
func (cl *Client) GetCachedTicket(spn string) (messages.Ticket, types.EncryptionKey, bool)
```

GetCachedTicket returns a ticket from the cache for the SPN. Only a ticket that is currently valid will be returned.

### func \(\*Client\) GetServiceTicket

```go
func (cl *Client) GetServiceTicket(spn string) (messages.Ticket, types.EncryptionKey, error)
```

GetServiceTicket makes a request to get a service ticket for the SPN specified SPN format: \<SERVICE\>/\<FQDN\> Eg. HTTP/www.example.com The ticket will be added to the client's ticket cache

### func \(\*Client\) IsConfigured

```go
func (cl *Client) IsConfigured() (bool, error)
```

IsConfigured indicates if the client has the values required set.

### func \(\*Client\) Key

```go
func (cl *Client) Key(etype etype.EType, kvno int, krberr *messages.KRBError) (types.EncryptionKey, int, error)
```

Key returns the client's encryption key for the specified encryption type and its kvno \(kvno of zero will find latest\). The key can be retrieved either from the keytab or generated from the client's password. If the client has both a keytab and a password defined the keytab is favoured as the source for the key A KRBError can be passed in the event the KDC returns one of type KDC\_ERR\_PREAUTH\_REQUIRED and is required to derive the key for pre\-authentication from the client's password. If a KRBError is not available, pass nil to this argument.

### func \(\*Client\) Log

```go
func (cl *Client) Log(format string, v ...interface{})
```

Log will write to the service's logger if it is configured.

### func \(\*Client\) Login

```go
func (cl *Client) Login() error
```

Login the client with the KDC via an AS exchange.

### func \(\*Client\) Print

```go
func (cl *Client) Print(w io.Writer)
```

Print writes the details of the client to the io.Writer provided.

### func \(\*Client\) TGSExchange

```go
func (cl *Client) TGSExchange(tgsReq messages.TGSReq, kdcRealm string, tgt messages.Ticket, sessionKey types.EncryptionKey, referral int) (messages.TGSReq, messages.TGSRep, error)
```

TGSExchange exchanges the provided TGS\_REQ with the KDC to retrieve a TGS\_REP. Referrals are automatically handled. The client's cache is updated with the ticket received.

### func \(\*Client\) TGSREQGenerateAndExchange

```go
func (cl *Client) TGSREQGenerateAndExchange(spn types.PrincipalName, kdcRealm string, tgt messages.Ticket, sessionKey types.EncryptionKey, renewal bool) (tgsReq messages.TGSReq, tgsRep messages.TGSRep, err error)
```

TGSREQGenerateAndExchange generates the TGS\_REQ and performs a TGS exchange to retrieve a ticket to the specified SPN.

## type Settings

Settings holds optional client settings.

```go
type Settings struct {
    // contains filtered or unexported fields
}
```

### func NewSettings

```go
func NewSettings(settings ...func(*Settings)) *Settings
```

NewSettings creates a new client settings struct.

### func \(\*Settings\) AssumePreAuthentication

```go
func (s *Settings) AssumePreAuthentication() bool
```

AssumePreAuthentication indicates if the client should proactively assume using pre\-authentication.

### func \(\*Settings\) DisablePAFXFAST

```go
func (s *Settings) DisablePAFXFAST() bool
```

DisablePAFXFAST indicates is the client should disable the use of PA\_FX\_FAST.

### func \(\*Settings\) JSON

```go
func (s *Settings) JSON() (string, error)
```

JSON returns a JSON representation of the settings.

### func \(\*Settings\) Logger

```go
func (s *Settings) Logger() *log.Logger
```

Logger returns the client logger instance.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

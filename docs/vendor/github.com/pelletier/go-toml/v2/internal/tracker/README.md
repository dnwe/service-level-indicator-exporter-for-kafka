<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# tracker

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/github.com/pelletier/go-toml/v2/internal/tracker"
```

## Index

- [type KeyTracker](<#type-keytracker>)
  - [func (t *KeyTracker) Key() []string](<#func-keytracker-key>)
  - [func (t *KeyTracker) Pop(node *ast.Node)](<#func-keytracker-pop>)
  - [func (t *KeyTracker) Push(node *ast.Node)](<#func-keytracker-push>)
  - [func (t *KeyTracker) UpdateArrayTable(node *ast.Node)](<#func-keytracker-updatearraytable>)
  - [func (t *KeyTracker) UpdateTable(node *ast.Node)](<#func-keytracker-updatetable>)
- [type SeenTracker](<#type-seentracker>)
  - [func (s *SeenTracker) CheckExpression(node *ast.Node) error](<#func-seentracker-checkexpression>)


## type KeyTracker

KeyTracker is a tracker that keeps track of the current Key as the AST is walked.

```go
type KeyTracker struct {
    // contains filtered or unexported fields
}
```

### func \(\*KeyTracker\) Key

```go
func (t *KeyTracker) Key() []string
```

Key returns the current key

### func \(\*KeyTracker\) Pop

```go
func (t *KeyTracker) Pop(node *ast.Node)
```

Pop key from stack.

### func \(\*KeyTracker\) Push

```go
func (t *KeyTracker) Push(node *ast.Node)
```

Push the given key on the stack.

### func \(\*KeyTracker\) UpdateArrayTable

```go
func (t *KeyTracker) UpdateArrayTable(node *ast.Node)
```

UpdateArrayTable sets the state of the tracker with the AST array table node.

### func \(\*KeyTracker\) UpdateTable

```go
func (t *KeyTracker) UpdateTable(node *ast.Node)
```

UpdateTable sets the state of the tracker with the AST table node.

## type SeenTracker

SeenTracker tracks which keys have been seen with which TOML type to flag duplicates and mismatches according to the spec.

Each node in the visited tree is represented by an entry. Each entry has an identifier, which is provided by a counter. Entries are stored in the array entries. As new nodes are discovered \(referenced for the first time in the TOML document\), entries are created and appended to the array. An entry points to its parent using its id.

To find whether a given key \(sequence of \[\]byte\) has already been visited, the entries are linearly searched, looking for one with the right name and parent id.

Given that all keys appear in the document after their parent, it is guaranteed that all descendants of a node are stored after the node, this speeds up the search process.

When encountering \[\[array tables\]\], the descendants of that node are removed to allow that branch of the tree to be "rediscovered". To maintain the invariant above, the deletion process needs to keep the order of entries. This results in more copies in that case.

```go
type SeenTracker struct {
    // contains filtered or unexported fields
}
```

### func \(\*SeenTracker\) CheckExpression

```go
func (s *SeenTracker) CheckExpression(node *ast.Node) error
```

CheckExpression takes a top\-level node and checks that it does not contain keys that have been seen in previous calls, and validates that types are consistent.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

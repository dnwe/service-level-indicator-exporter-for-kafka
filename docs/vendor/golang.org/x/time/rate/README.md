<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# rate

```go
import "github.com/vmware/service-level-indicator-exporter-for-kafka/vendor/golang.org/x/time/rate"
```

Package rate provides a rate limiter.

## Index

- [Constants](<#constants>)
- [type Limit](<#type-limit>)
  - [func Every(interval time.Duration) Limit](<#func-every>)
- [type Limiter](<#type-limiter>)
  - [func NewLimiter(r Limit, b int) *Limiter](<#func-newlimiter>)
  - [func (lim *Limiter) Allow() bool](<#func-limiter-allow>)
  - [func (lim *Limiter) AllowN(now time.Time, n int) bool](<#func-limiter-allown>)
  - [func (lim *Limiter) Burst() int](<#func-limiter-burst>)
  - [func (lim *Limiter) Limit() Limit](<#func-limiter-limit>)
  - [func (lim *Limiter) Reserve() *Reservation](<#func-limiter-reserve>)
  - [func (lim *Limiter) ReserveN(now time.Time, n int) *Reservation](<#func-limiter-reserven>)
  - [func (lim *Limiter) SetBurst(newBurst int)](<#func-limiter-setburst>)
  - [func (lim *Limiter) SetBurstAt(now time.Time, newBurst int)](<#func-limiter-setburstat>)
  - [func (lim *Limiter) SetLimit(newLimit Limit)](<#func-limiter-setlimit>)
  - [func (lim *Limiter) SetLimitAt(now time.Time, newLimit Limit)](<#func-limiter-setlimitat>)
  - [func (lim *Limiter) Wait(ctx context.Context) (err error)](<#func-limiter-wait>)
  - [func (lim *Limiter) WaitN(ctx context.Context, n int) (err error)](<#func-limiter-waitn>)
- [type Reservation](<#type-reservation>)
  - [func (r *Reservation) Cancel()](<#func-reservation-cancel>)
  - [func (r *Reservation) CancelAt(now time.Time)](<#func-reservation-cancelat>)
  - [func (r *Reservation) Delay() time.Duration](<#func-reservation-delay>)
  - [func (r *Reservation) DelayFrom(now time.Time) time.Duration](<#func-reservation-delayfrom>)
  - [func (r *Reservation) OK() bool](<#func-reservation-ok>)


## Constants

Inf is the infinite rate limit; it allows all events \(even if burst is zero\).

```go
const Inf = Limit(math.MaxFloat64)
```

InfDuration is the duration returned by Delay when a Reservation is not OK.

```go
const InfDuration = time.Duration(1<<63 - 1)
```

## type Limit

Limit defines the maximum frequency of some events. Limit is represented as number of events per second. A zero Limit allows no events.

```go
type Limit float64
```

### func Every

```go
func Every(interval time.Duration) Limit
```

Every converts a minimum time interval between events to a Limit.

## type Limiter

A Limiter controls how frequently events are allowed to happen. It implements a "token bucket" of size b, initially full and refilled at rate r tokens per second. Informally, in any large enough time interval, the Limiter limits the rate to r tokens per second, with a maximum burst size of b events. As a special case, if r == Inf \(the infinite rate\), b is ignored. See https://en.wikipedia.org/wiki/Token_bucket for more about token buckets.

The zero value is a valid Limiter, but it will reject all events. Use NewLimiter to create non\-zero Limiters.

Limiter has three main methods, Allow, Reserve, and Wait. Most callers should use Wait.

Each of the three methods consumes a single token. They differ in their behavior when no token is available. If no token is available, Allow returns false. If no token is available, Reserve returns a reservation for a future token and the amount of time the caller must wait before using it. If no token is available, Wait blocks until one can be obtained or its associated context.Context is canceled.

The methods AllowN, ReserveN, and WaitN consume n tokens.

```go
type Limiter struct {
    // contains filtered or unexported fields
}
```

### func NewLimiter

```go
func NewLimiter(r Limit, b int) *Limiter
```

NewLimiter returns a new Limiter that allows events up to rate r and permits bursts of at most b tokens.

### func \(\*Limiter\) Allow

```go
func (lim *Limiter) Allow() bool
```

Allow is shorthand for AllowN\(time.Now\(\), 1\).

### func \(\*Limiter\) AllowN

```go
func (lim *Limiter) AllowN(now time.Time, n int) bool
```

AllowN reports whether n events may happen at time now. Use this method if you intend to drop / skip events that exceed the rate limit. Otherwise use Reserve or Wait.

### func \(\*Limiter\) Burst

```go
func (lim *Limiter) Burst() int
```

Burst returns the maximum burst size. Burst is the maximum number of tokens that can be consumed in a single call to Allow, Reserve, or Wait, so higher Burst values allow more events to happen at once. A zero Burst allows no events, unless limit == Inf.

### func \(\*Limiter\) Limit

```go
func (lim *Limiter) Limit() Limit
```

Limit returns the maximum overall event rate.

### func \(\*Limiter\) Reserve

```go
func (lim *Limiter) Reserve() *Reservation
```

Reserve is shorthand for ReserveN\(time.Now\(\), 1\).

### func \(\*Limiter\) ReserveN

```go
func (lim *Limiter) ReserveN(now time.Time, n int) *Reservation
```

ReserveN returns a Reservation that indicates how long the caller must wait before n events happen. The Limiter takes this Reservation into account when allowing future events. The returned Reservationâ€™s OK\(\) method returns false if n exceeds the Limiter's burst size. Usage example:

```
r := lim.ReserveN(time.Now(), 1)
if !r.OK() {
  // Not allowed to act! Did you remember to set lim.burst to be > 0 ?
  return
}
time.Sleep(r.Delay())
Act()
```

Use this method if you wish to wait and slow down in accordance with the rate limit without dropping events. If you need to respect a deadline or cancel the delay, use Wait instead. To drop or skip events exceeding rate limit, use Allow instead.

### func \(\*Limiter\) SetBurst

```go
func (lim *Limiter) SetBurst(newBurst int)
```

SetBurst is shorthand for SetBurstAt\(time.Now\(\), newBurst\).

### func \(\*Limiter\) SetBurstAt

```go
func (lim *Limiter) SetBurstAt(now time.Time, newBurst int)
```

SetBurstAt sets a new burst size for the limiter.

### func \(\*Limiter\) SetLimit

```go
func (lim *Limiter) SetLimit(newLimit Limit)
```

SetLimit is shorthand for SetLimitAt\(time.Now\(\), newLimit\).

### func \(\*Limiter\) SetLimitAt

```go
func (lim *Limiter) SetLimitAt(now time.Time, newLimit Limit)
```

SetLimitAt sets a new Limit for the limiter. The new Limit, and Burst, may be violated or underutilized by those which reserved \(using Reserve or Wait\) but did not yet act before SetLimitAt was called.

### func \(\*Limiter\) Wait

```go
func (lim *Limiter) Wait(ctx context.Context) (err error)
```

Wait is shorthand for WaitN\(ctx, 1\).

### func \(\*Limiter\) WaitN

```go
func (lim *Limiter) WaitN(ctx context.Context, n int) (err error)
```

WaitN blocks until lim permits n events to happen. It returns an error if n exceeds the Limiter's burst size, the Context is canceled, or the expected wait time exceeds the Context's Deadline. The burst limit is ignored if the rate limit is Inf.

## type Reservation

A Reservation holds information about events that are permitted by a Limiter to happen after a delay. A Reservation may be canceled, which may enable the Limiter to permit additional events.

```go
type Reservation struct {
    // contains filtered or unexported fields
}
```

### func \(\*Reservation\) Cancel

```go
func (r *Reservation) Cancel()
```

Cancel is shorthand for CancelAt\(time.Now\(\)\).

### func \(\*Reservation\) CancelAt

```go
func (r *Reservation) CancelAt(now time.Time)
```

CancelAt indicates that the reservation holder will not perform the reserved action and reverses the effects of this Reservation on the rate limit as much as possible, considering that other reservations may have already been made.

### func \(\*Reservation\) Delay

```go
func (r *Reservation) Delay() time.Duration
```

Delay is shorthand for DelayFrom\(time.Now\(\)\).

### func \(\*Reservation\) DelayFrom

```go
func (r *Reservation) DelayFrom(now time.Time) time.Duration
```

DelayFrom returns the duration for which the reservation holder must wait before taking the reserved action.  Zero duration means act immediately. InfDuration means the limiter cannot grant the tokens requested in this Reservation within the maximum wait time.

### func \(\*Reservation\) OK

```go
func (r *Reservation) OK() bool
```

OK returns whether the limiter can provide the requested number of tokens within the maximum wait time.  If OK is false, Delay returns InfDuration, and Cancel does nothing.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
